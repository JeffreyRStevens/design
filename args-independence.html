<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>8 Avoid dependencies between arguments | Tidyverse design guide</title>
<meta name="author" content="Tidyverse team">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="8 Avoid dependencies between arguments | Tidyverse design guide">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="8 Avoid dependencies between arguments | Tidyverse design guide">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<meta name="description" content="8.1 What’s the problem? Avoid creating dependencies between details arguments so that only certain combinations are permitted. Dependencies between arguments makes functions harder to use because...">
<meta property="og:description" content="8.1 What’s the problem? Avoid creating dependencies between details arguments so that only certain combinations are permitted. Dependencies between arguments makes functions harder to use because...">
<meta name="twitter:description" content="8.1 What’s the problem? Avoid creating dependencies between details arguments so that only certain combinations are permitted. Dependencies between arguments makes functions harder to use because...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tidyverse design guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="structure.html"><span class="header-section-number">1</span> Structure</a></li>
<li><a class="" href="unifying-principles.html"><span class="header-section-number">2</span> Unifying principles</a></li>
<li class="book-part">Implementation</li>
<li><a class="" href="names-attribute.html"><span class="header-section-number">3</span> Names attribute</a></li>
<li><a class="" href="call-data-details.html"><span class="header-section-number">4</span> Name details arguments</a></li>
<li><a class="" href="function-names.html"><span class="header-section-number">5</span> Function names</a></li>
<li class="book-part">Interface: inputs</li>
<li><a class="" href="args-hidden.html"><span class="header-section-number">6</span> Avoid hidden arguments</a></li>
<li><a class="" href="args-data-details.html"><span class="header-section-number">7</span> Data, descriptors, details</a></li>
<li><a class="active" href="args-independence.html"><span class="header-section-number">8</span> Avoid dependencies between arguments</a></li>
<li><a class="" href="case-study-setnames.html"><span class="header-section-number">9</span> Case study: setNames()</a></li>
<li class="book-part">Interface: default values</li>
<li><a class="" href="def-required.html"><span class="header-section-number">10</span> Required args shouldn’t have defaults</a></li>
<li><a class="" href="cs-rep.html"><span class="header-section-number">11</span> Case study: rep()</a></li>
<li><a class="" href="def-enum.html"><span class="header-section-number">12</span> Enumerate possible options</a></li>
<li><a class="" href="def-magical.html"><span class="header-section-number">13</span> Avoid magical defaults</a></li>
<li><a class="" href="def-short.html"><span class="header-section-number">14</span> Keep defaults short and sweet</a></li>
<li><a class="" href="def-inform.html"><span class="header-section-number">15</span> Explain important defaults</a></li>
<li><a class="" href="def-user.html"><span class="header-section-number">16</span> User settable defaults</a></li>
<li><a class="" href="cs-rgb.html"><span class="header-section-number">17</span> Case study: rgb()</a></li>
<li class="book-part">Interface: ...</li>
<li><a class="" href="dots-position.html"><span class="header-section-number">18</span> Data, dots, details</a></li>
<li><a class="" href="dots-data.html"><span class="header-section-number">19</span> Making data with …</a></li>
<li><a class="" href="dots-prefix.html"><span class="header-section-number">20</span> Dot prefix</a></li>
<li><a class="" href="dots-inspect.html"><span class="header-section-number">21</span> Inspect the dots</a></li>
<li><a class="" href="cs-mapply-pmap.html"><span class="header-section-number">22</span> Case study: mapply() vs pmap()</a></li>
<li class="book-part">Interface: outputs</li>
<li><a class="" href="out-multi.html"><span class="header-section-number">23</span> Returning multiple values</a></li>
<li><a class="" href="out-type-stability.html"><span class="header-section-number">24</span> Type-stability</a></li>
<li><a class="" href="out-vectorisation.html"><span class="header-section-number">25</span> Vectorisation</a></li>
<li><a class="" href="out-invisible.html"><span class="header-section-number">26</span> Side-effect functions should return invisibly</a></li>
<li class="book-part">Interface: errors</li>
<li><a class="" href="err-call.html"><span class="header-section-number">27</span> Error call</a></li>
<li><a class="" href="err-constructor.html"><span class="header-section-number">28</span> Error constructors</a></li>
<li class="book-part">Interface: changes</li>
<li><a class="" href="changes-multivers.html"><span class="header-section-number">29</span> Work with multiple dependency versions</a></li>
<li class="book-part">Interface: side effects</li>
<li><a class="" href="side-effect-soup.html"><span class="header-section-number">30</span> Side-effect soup</a></li>
<li><a class="" href="spooky-action.html"><span class="header-section-number">31</span> Spooky action</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="glossary.html"><span class="header-section-number">A</span> Glossary</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="http://github.com/tidyverse/design">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="args-independence" class="section level1" number="8">
<h1>
<span class="header-section-number">8</span> Avoid dependencies between arguments<a class="anchor" aria-label="anchor" href="#args-independence"><i class="fas fa-link"></i></a>
</h1>
<div id="whats-the-problem-1" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> What’s the problem?<a class="anchor" aria-label="anchor" href="#whats-the-problem-1"><i class="fas fa-link"></i></a>
</h2>
<p>Avoid creating dependencies between details arguments so that only certain combinations are permitted. Dependencies between arguments makes functions harder to use because you have to remember how arguments interact, and you when reading a call, you need to read multiple arguments before interpreting one.</p>
</div>
<div id="what-are-some-examples-2" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> What are some examples?<a class="anchor" aria-label="anchor" href="#what-are-some-examples-2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<p>In <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code> you can supply both <code>times</code> and <code>each</code> <em>unless</em> <code>times</code> is a
vector:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, times <span class="op">=</span> <span class="fl">2</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 1 1 1 2 2 2 3 3 3 1 1 1 2 2 2 3 3 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, times <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in rep(1:3, times = 1:3, each = 2): invalid 'times' argument</span></span></code></pre></div>
<p>Learn more in Chapter <a href="cs-rep.html#cs-rep">11</a>.</p>
</li>
<li><p>In <code><a href="https://rdrr.io/r/stats/cor.html">var()</a></code>, <code>na.rm</code> is only used if <code>use</code> is not set. If you supply both
<code>use</code> and <code>na.rm</code>, <code>na.rm</code> is silently ignored.</p></li>
<li>
<p>In <code><a href="https://rdrr.io/r/stats/GammaDist.html">rgamma()</a></code> you can provide either <code>scale</code> or <code>rate</code>. If you supply both
you will get an error or a warning:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/GammaDist.html">rgamma</a></span><span class="op">(</span><span class="fl">5</span>, shape <span class="op">=</span> <span class="fl">1</span>, rate <span class="op">=</span> <span class="fl">2</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in rgamma(5, shape = 1, rate = 2, scale = 1/2): specify 'rate' or</span></span>
<span><span class="co">#&gt; 'scale' but not both</span></span>
<span><span class="co">#&gt; [1] 0.06124463 0.27777043 1.81029217 0.19422776 0.28172955</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/GammaDist.html">rgamma</a></span><span class="op">(</span><span class="fl">5</span>, shape <span class="op">=</span> <span class="fl">1</span>, rate <span class="op">=</span> <span class="fl">2</span>, scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in rgamma(5, shape = 1, rate = 2, scale = 2): specify 'rate' or 'scale' but not both</span></span></code></pre></div>
</li>
<li><p><code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code> has <code>perl</code>, <code>fixed</code>, and <code>ignore.case</code> arguments which can
either be <code>TRUE</code> or <code>FALSE</code>. But <code>fixed = TRUE</code> overrides <code>perl = TRUE</code>,
and <code>ignore.case</code> only works if <code>fixed = FALSE</code>. Both <code>fixed</code> and <code>perl</code>
change how another argument, <code>pattern</code>, is interpreted.</p></li>
<li>
<p>In <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> the <code>character.only</code> argument changes how <code>package</code> is
intepreted:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ggplot2</span> <span class="op">&lt;-</span> <span class="st">"dplyr"</span></span>
<span></span>
<span><span class="co"># Loads ggplot2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Loads dplyr</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span>, character.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</li>
<li><p><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">forcats::fct_lump()</a></code> decides which algorithm to use based on a
combination of the <code>n</code> and <code>prop</code> arguments.</p></li>
<li><p>In <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">ggplot2::geom_histogram()</a></code>, you can specify the histogram breaks in
three ways: as a number of <code>bins</code>, as the width of each bin (<code>binwidth</code>,
plus <code>center</code> or <code>boundary</code>), or the exact <code>breaks</code>. You can only pick
one of the three options, which is hard to convey in the documentation.
There’s also an implied precedence so that if more than one option is
supplied, one will silently win.</p></li>
<li><p>In <code><a href="https://readr.tidyverse.org/reference/locale.html">readr::locale()</a></code> there’s a complex dependency between <code>decimal_mark</code>
and <code>grouping_mark</code> because they can’t be the same value, and the US and
Europe use different standards.</p></li>
</ul>
<p>See Sections <a href="def-required.html#args-mutually-exclusive">10.3.1</a> and <a href="def-required.html#args-compound">10.3.2</a> for a two exceptions where the dependency is via specific patterns of missing arguments.</p>
</div>
<div id="why-is-this-important" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> Why is this important?<a class="anchor" aria-label="anchor" href="#why-is-this-important"><i class="fas fa-link"></i></a>
</h2>
<p>Having complicated interdependencies between arguments has major downsides:</p>
<ul>
<li><p>It suggests that there are many more viable code paths than there really
are and all those (unnecessary) possibilities still occupy head space.
You have to memorise the set of allowed combinations, rather than
them being implied by the structure of the function.</p></li>
<li><p>It increases implementation complexity. Interdependence of arguments
suggests complex implementation paths which are harder to analyse and
test.</p></li>
<li><p>It makes documentation harder to write. You have to use extra words to
explain exactly how combinations of arguments work together, and it’s not
obvious where those words should go. If there’s an interaction between
<code>arg_a</code> and <code>arg_b</code> do you document with <code>arg_a</code>, with <code>arg_b</code>, or with
both?</p></li>
</ul>
</div>
<div id="how-do-i-remediate" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> How do I remediate?<a class="anchor" aria-label="anchor" href="#how-do-i-remediate"><i class="fas fa-link"></i></a>
</h2>
<p>Often these problems arise because the scope of a function grows over time. When the function was initially designed, the scope was small, and it grew incrementally over time. At no point did it seem worth the additional effort to refactor to a new design, but now you have a large complex function. This makes the problem hard to avoid.</p>
<p>To remediate the problem, you’ll need to think holistically and reconsider the complete interface. There are two common outcomes which are illustrated in the case studies below:</p>
<ul>
<li><p>Splitting the function into multiple functions that each do one thing.</p></li>
<li><p>Encapulsating related details arguments into a single object.</p></li>
</ul>
<p>See also larger case study in Chapter <a href="cs-rep.html#cs-rep">11</a> where this problem is tangled up with other problems.</p>
<p>If these changes to the interface occur to exported functions in a package, you’ll need to consider how to preserve the interface with deprecation warnings. For important functions, it is worth generating an message that includes new code to copy and paste.</p>
<div id="cs-fct-lump" class="section level3" number="8.4.1">
<h3>
<span class="header-section-number">8.4.1</span> Case study: <code>fct_lump()</code><a class="anchor" aria-label="anchor" href="#cs-fct-lump"><i class="fas fa-link"></i></a>
</h3>
<p>There are many different ways to decide how to lump uncommon factor levels together, and initially we attempted to encode these through arguments to <code>fct_lump()</code>. However, over time as the number of arguments increased, it gets harder and harder to tell what the options are. Currently there are three behaviours:</p>
<ul>
<li><p>Both <code>n</code> and <code>prop</code> missing - merge together the least
frequent levels, ensuring that <code>other</code> is still the smallest level.
(For this case, the <code>ties.method</code> argument is ignored.)</p></li>
<li><p>Only <code>n</code> supplied: if positive, preserves <code>n</code> most common values.</p></li>
<li><p>Only <code>prop</code> supplied: if positive, preserves</p></li>
<li><p>Both <code>n</code> and <code>prop</code> supplied: due to a bug in the code, this is treated
the same way as both <code>n</code> and <code>prop</code> missing! (But it really should be an
error)</p></li>
</ul>
<p>Would be better to break into three functions:</p>
<ul>
<li><code>fct_lump_n(f, n)</code></li>
<li><code>fct_lump_prop(f, prop)</code></li>
<li><code>fct_lump_smallest(f)</code></li>
</ul>
<p>That has three advantages:</p>
<ul>
<li><p>The name of function helps remind you of the purpose.</p></li>
<li><p>There’s no way to supply both <code>n</code> and <code>prop</code>.</p></li>
<li><p>The <code>ties.method</code> argument would only appear in <code>fct_lump_n()</code> and <code>_prop()</code>,
not <code>_smallest()</code>.</p></li>
</ul>
</div>
<div id="case-study-grepl-vs-stringrstr_detect" class="section level3" number="8.4.2">
<h3>
<span class="header-section-number">8.4.2</span> Case study: <code>grepl()</code> vs <code>stringr::str_detect()</code><a class="anchor" aria-label="anchor" href="#case-study-grepl-vs-stringrstr_detect"><i class="fas fa-link"></i></a>
</h3>
<!-- 
https://github.com/wch/r-source/blob/trunk/src/main/grep.c#L891-L1151 -->
<p><code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code>, has three arguments that take either <code>FALSE</code> or <code>TRUE</code>: <code>ignore.case</code>, <code>perl</code>, <code>fixed</code>, which might suggest that there are 2 ^ 3 = 16 possible invocations. However, a number of combinations are not allowed:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="va">letters</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in grepl("a", letters, fixed = TRUE, ignore.case = TRUE): argument</span></span>
<span><span class="co">#&gt; 'ignore.case = TRUE' will be ignored</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="va">letters</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span>, perl <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in grepl("a", letters, fixed = TRUE, perl = TRUE): argument 'perl =</span></span>
<span><span class="co">#&gt; TRUE' will be ignored</span></span></code></pre></div>
<p>Part of this problem could be resolved by making it more clear that one important choice is the matching engine to use: POSIX 1003.2 extended regular expressions (the default), Perl-style regular expressions (<code>perl = TRUE</code>) or fixed matching (<code>fixed = TRUE</code>). A better approach would be to use the pattern in Chapter <a href="def-enum.html#def-enum">12</a>, and create a new argument called something like <code>engine = c("POSIX", "perl", "fixed")</code>.</p>
<p>The other problem is that <code>ignore.case</code> can only affect two of the three engines: POSIX and perl. This is hard to remedy without creating a completely new matching engine. Anything to do with case is always harder than you might expect because different languages have different rules.</p>
<p>stringr takes a different approach, encoding the engine as an attribute of the pattern:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co"># short for:</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">fixed</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">coll</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This has the advantage that each engine can take different arguments.</p>
<p>An alternative approach would be to have a separate engine argument:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="st">"a"</span>, engine <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="st">"a"</span>, engine <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">fixed</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="st">"a"</span>, engine <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">coll</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This approach is a bit more discoverable (because there’s clearly another argument that affects the pattern), but it’s slightly less general, because of the <code><a href="https://stringr.tidyverse.org/reference/modifiers.html">boundary()</a></code> engine, which doesn’t match patterns but boundaries:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">boundary</a></span><span class="op">(</span><span class="st">"word"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Seems confusing: now you can omit the pattern argument?</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">letters</span>, engine <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">boundary</a></span><span class="op">(</span><span class="st">"word"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>It would also mean that you had an argument <code>engine</code>, that affected how another argument, <code>pattern</code>, was interpreted, so it would repeat the problem in a slightly different form.</p>
<p>It’s appealing to all the details of the match wrapped up into a single object.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="args-data-details.html"><span class="header-section-number">7</span> Data, descriptors, details</a></div>
<div class="next"><a href="case-study-setnames.html"><span class="header-section-number">9</span> Case study: setNames()</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#args-independence"><span class="header-section-number">8</span> Avoid dependencies between arguments</a></li>
<li><a class="nav-link" href="#whats-the-problem-1"><span class="header-section-number">8.1</span> What’s the problem?</a></li>
<li><a class="nav-link" href="#what-are-some-examples-2"><span class="header-section-number">8.2</span> What are some examples?</a></li>
<li><a class="nav-link" href="#why-is-this-important"><span class="header-section-number">8.3</span> Why is this important?</a></li>
<li>
<a class="nav-link" href="#how-do-i-remediate"><span class="header-section-number">8.4</span> How do I remediate?</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#cs-fct-lump"><span class="header-section-number">8.4.1</span> Case study: fct_lump()</a></li>
<li><a class="nav-link" href="#case-study-grepl-vs-stringrstr_detect"><span class="header-section-number">8.4.2</span> Case study: grepl() vs stringr::str_detect()</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="http://github.com/tidyverse/design/blob/main/args-independence.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="http://github.com/tidyverse/design/edit/main/args-independence.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tidyverse design guide</strong>" was written by Tidyverse team. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
