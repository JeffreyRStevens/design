<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2 Unifying principles | Tidyverse design guide</title>
<meta name="author" content="Tidyverse team">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="2 Unifying principles | Tidyverse design guide">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2 Unifying principles | Tidyverse design guide">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<meta name="description" content="The tidyverse is a language for solving data science challenges with R code. Its primary goal is to facilitate the conversation that a human has with a dataset, and we want to help dig a “pit of...">
<meta property="og:description" content="The tidyverse is a language for solving data science challenges with R code. Its primary goal is to facilitate the conversation that a human has with a dataset, and we want to help dig a “pit of...">
<meta name="twitter:description" content="The tidyverse is a language for solving data science challenges with R code. Its primary goal is to facilitate the conversation that a human has with a dataset, and we want to help dig a “pit of...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tidyverse design guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="structure.html"><span class="header-section-number">1</span> Structure</a></li>
<li><a class="active" href="unifying-principles.html"><span class="header-section-number">2</span> Unifying principles</a></li>
<li class="book-part">Implementation</li>
<li><a class="" href="names-attribute.html"><span class="header-section-number">3</span> Names attribute</a></li>
<li><a class="" href="call-data-details.html"><span class="header-section-number">4</span> Name details arguments</a></li>
<li><a class="" href="function-names.html"><span class="header-section-number">5</span> Function names</a></li>
<li class="book-part">Interface: inputs</li>
<li><a class="" href="args-hidden.html"><span class="header-section-number">6</span> Avoid hidden arguments</a></li>
<li><a class="" href="args-data-details.html"><span class="header-section-number">7</span> Data, descriptors, details</a></li>
<li><a class="" href="args-independence.html"><span class="header-section-number">8</span> Avoid dependencies between arguments</a></li>
<li><a class="" href="case-study-setnames.html"><span class="header-section-number">9</span> Case study: setNames()</a></li>
<li class="book-part">Interface: default values</li>
<li><a class="" href="def-required.html"><span class="header-section-number">10</span> Required args shouldn’t have defaults</a></li>
<li><a class="" href="cs-rep.html"><span class="header-section-number">11</span> Case study: rep()</a></li>
<li><a class="" href="def-enum.html"><span class="header-section-number">12</span> Enumerate possible options</a></li>
<li><a class="" href="def-magical.html"><span class="header-section-number">13</span> Avoid magical defaults</a></li>
<li><a class="" href="def-short.html"><span class="header-section-number">14</span> Keep defaults short and sweet</a></li>
<li><a class="" href="def-inform.html"><span class="header-section-number">15</span> Explain important defaults</a></li>
<li><a class="" href="def-user.html"><span class="header-section-number">16</span> User settable defaults</a></li>
<li><a class="" href="cs-rgb.html"><span class="header-section-number">17</span> Case study: rgb()</a></li>
<li class="book-part">Interface: ...</li>
<li><a class="" href="dots-position.html"><span class="header-section-number">18</span> Data, dots, details</a></li>
<li><a class="" href="dots-data.html"><span class="header-section-number">19</span> Making data with …</a></li>
<li><a class="" href="dots-prefix.html"><span class="header-section-number">20</span> Dot prefix</a></li>
<li><a class="" href="dots-inspect.html"><span class="header-section-number">21</span> Inspect the dots</a></li>
<li><a class="" href="cs-mapply-pmap.html"><span class="header-section-number">22</span> Case study: mapply() vs pmap()</a></li>
<li class="book-part">Interface: outputs</li>
<li><a class="" href="out-multi.html"><span class="header-section-number">23</span> Returning multiple values</a></li>
<li><a class="" href="out-type-stability.html"><span class="header-section-number">24</span> Type-stability</a></li>
<li><a class="" href="out-vectorisation.html"><span class="header-section-number">25</span> Vectorisation</a></li>
<li><a class="" href="out-invisible.html"><span class="header-section-number">26</span> Side-effect functions should return invisibly</a></li>
<li class="book-part">Interface: errors</li>
<li><a class="" href="err-call.html"><span class="header-section-number">27</span> Error call</a></li>
<li><a class="" href="err-constructor.html"><span class="header-section-number">28</span> Error constructors</a></li>
<li class="book-part">Interface: changes</li>
<li><a class="" href="changes-multivers.html"><span class="header-section-number">29</span> Work with multiple dependency versions</a></li>
<li class="book-part">Interface: side effects</li>
<li><a class="" href="side-effect-soup.html"><span class="header-section-number">30</span> Side-effect soup</a></li>
<li><a class="" href="spooky-action.html"><span class="header-section-number">31</span> Spooky action</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="glossary.html"><span class="header-section-number">A</span> Glossary</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="http://github.com/tidyverse/design">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="unifying-principles" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Unifying principles<a class="anchor" aria-label="anchor" href="#unifying-principles"><i class="fas fa-link"></i></a>
</h1>
<p>The tidyverse is a language for solving data science challenges with R code. Its primary goal is to facilitate the conversation that a human has with a dataset, and we want to help dig a “pit of success” where the least-effort path trends towards a positive outcome. The primary tool to dig the pit is API design: by carefully considering the external interface to a function, we can help guide the user towards success. But it’s also necessary to have some high level principles that guide how we think broadly about APIs, principles that we can use to “break ties” when other factors are balanced.</p>
<p>The tidyverse has four guiding principles:</p>
<ul>
<li><p>It is <strong>human centered</strong>, i.e. the tidyverse is designed specifically to
support the activities of a human data analyst.</p></li>
<li><p>It is <strong>consistent</strong>, so that what you learn about one function or package
can be applied to another, and the number of special cases that you need
to remember is as small as possible.</p></li>
<li><p>It is <strong>composable</strong>, allowing you to solve complex problems by breaking
them down into small pieces, supporting a rapid cycle of exploratory
iteration to find the best solution.</p></li>
<li><p>It is <strong>inclusive</strong>, because the tidyverse is not just the collection of
packages, but it is also the community of people who use them.</p></li>
</ul>
<p>These guiding principles are aspirational; they’re not always fully realised in current tidyverse packages, but we strive to make them so.</p>
<div id="related-work" class="section level3 unnumbered">
<h3>Related work<a class="anchor" aria-label="anchor" href="#related-work"><i class="fas fa-link"></i></a>
</h3>
<p>These principles are inspired by writings about the design of other systems: such as:</p>
<ul>
<li><a href="https://homepage.cs.uri.edu/~thenry/resources/unix_art/ch01s06.html">The Unix philsophy</a></li>
<li><a href="https://www.python.org/dev/peps/pep-0020/">The Zen of Python</a></li>
<li><a href="https://refs.devinmcgloin.com/smalltalk/Design-Principles-Behind-Smalltalk.pdf">Design Principles Behind Smalltalk</a></li>
</ul>
</div>
<div id="human-centered" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Human centered<a class="anchor" aria-label="anchor" href="#human-centered"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Programs must be written for people to read, and only incidentally
for machines to execute.</p>
<p>— Hal Abelson</p>
</blockquote>
<p>Programming is a task performed by humans. To create effective programming tools we must explicitly recognise and acknowledge the role played by cognitive psychology. This is particularly important for R, because it’s a language that’s used primarily by non-programmers, and we want to make it as easy as possible for first-time and end-user programmers to learn the tidyverse.</p>
<p>A particularly useful tool from cognitive psychology is “cognitive load theory”<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;A good practical introduction is &lt;a href="https://www.cese.nsw.gov.au/images/stories/PDF/Cognitive_load_theory_practice_guide_AA.pdf"&gt;Cognitive load theory in practice&lt;/a&gt; (PDF).&lt;/p&gt;'><sup>1</sup></a>: we have a limited working memory, and anything we can do to reduce extraneous cognitive load helps the learner and user of the tidyverse. This motivates the next two principles:</p>
<ul>
<li><p>By being <strong>consistent</strong> you only need to learn and internalise one
expression of an idea, and then you can apply that many times.</p></li>
<li><p>By being <strong>composable</strong> you can break down complex problems into bite sized
pieces that you can easily hold in your head.</p></li>
</ul>
<p>Idea of “chunking” is important. Some setup cost to learn a new chunk, but once you’ve internalised it, it only takes up one spot in your working memory. In some sense the goal of the tidyverse is to discover the minimal set of chunks needed to do data science and have some sense of the priority of the remainder.</p>
<p>Other useful ideas come from design. One particularly powerful idea is that of “affordance”: the exterior of a tool should suggest how to use it. We want to avoid <a href="https://99percentinvisible.org/article/norman-doors/">“Norman doors”</a> where the exterior clues and cues point you in the wrong direction.</p>
<p>This principle is deeply connected to our beliefs about performance. Most importantly performance of code depends not only on how long it takes to run, but also how long it takes to <em>write</em> and <em>read</em>. Human brains are typically slower than computers, so this means we spend a lot of time thinking about how to create intuitve interfaces, focussing on writing and reading speed. Intuitive interfaces sometimes are at odds with running speed, because writing the fastest code for a problem often requires designing the interface for performance rather than usability. Generally, we optimise first for humans, then use profiling to discover bottlenecks that cause friction in data analysis. Once we have identified an important bottleneck, then performance becomes a priority and we rewrite the existing code. Generally, we’ll attempt to preserve the existing interface, only changing it when the performance implications are significant.</p>
</div>
<div id="consistent" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Consistent<a class="anchor" aria-label="anchor" href="#consistent"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>A system should be built with a minimum set of unchangeable parts;
those parts should be as general as possible; and all parts of the
system should be held in a uniform framework.</p>
<p>— Daniel H. H. Ingalls</p>
</blockquote>
<p>The most important API principle of the tidyverse is to be consistent. We want to find the smallest possible set of key ideas and use them again and again. This is important because it makes the tidyverse easier to learn and remember.</p>
<p>(Another framing of this principle is <a href="http://www.calvin.edu/~rpruim/talks/LessVolume/2015-06-24-AKL/LessVolume-2015-06-24.html#1">Less Volume, More Creativity</a>, which comes from Mike McCarthy, the head coach of the Green Bay Packers, and popularised in Statistics Education by <a href="https://www.calvin.edu/~rpruim/">Randall Pruim</a>)</p>
<p>This is related to one of my favourite saying from the Python community:</p>
<blockquote>
<p>There should be one—and preferably only one—obvious way to do it.</p>
<p>— Zen of Python</p>
</blockquote>
<p>The tidyverse aspires to put this philosophy into practice. However, because the tidyverse is embedded within the larger R ecosystem, applying this principle never needs to be 100% comprehensive. If you can’t solve a problem from within the tidyverse, you can always step outside and do so with base R or another package. This also means that we don’t have to rush to cover every possible use case; we can take our time to develop the best new solutions.</p>
<p>The principle of consistency reveals itself in two primary ways: in function APIs and in data structures. The API of a function defines its external interface (independent of its internal implementation). Having consistent APIs means that each time you learn a function, learning the next function is a little easier; once you’ve mastered one package, mastering the next is easier.</p>
<p>There are two ways that we make functions consistent that are so important that they’re explicitly pull out as high-level principles below:</p>
<ul>
<li><p>Functions should be composable: each individual function should tackle
one well contained problem, and you solve complex real-world problems by
composing many individual functions.</p></li>
<li><p>Overall, the API should feel “functional”, which is a technical term for
the programming paradigm favoured by the tidyverse</p></li>
</ul>
<p>But consistency also applies to data structures: we want to ensure we use the same data structures again and again and again. Principally, we expect data to be stored in <a href="https://www.jstatsoft.org/article/view/v059i10">tidy</a> data frames or <a href="https://github.com/hadley/tibble/">tibbles</a>. This means that tools for converting other formats can be centralised in one place, and that packages development is simplified by assuming that data is already in a standard format.</p>
<p>Valuing consistency is a trade-off, and we explicitly value it over performance. There are cases where a different data structure or a different interface might make a solution simpler to express or much faster. However, one-off solutions create a much higher cognitive load.</p>
</div>
<div id="composable" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Composable<a class="anchor" aria-label="anchor" href="#composable"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>No matter how complex and polished the individual operations are,
it is often the quality of the glue that most directly determines
the power of the system.</p>
<p>— Hal Abelson</p>
</blockquote>
<p>A powerful strategy for solving complex problems is to combine many simple pieces. Each piece should be easily understood in isolation, and have a standard way of combining with other pieces.</p>
<p>Within the tidyverse, we prefer to compose functions using a single tool: the pipe, <code>%&gt;%</code>. There are two notable exceptions to this principle: ggplot2 composes graphical elements with <code>+</code>, and httr composes requests primarily through <code>...</code>. These are not bad techniques in isolation, and they are well suited to the domains in which they are used, but the disadvantages of inconsistency outweigh any local advantages.</p>
<p>For smaller domains, this means carefully designing functions so that the inputs and outputs align (e.g. the output from <code><a href="https://stringr.tidyverse.org/reference/str_locate.html">stringr::str_locate()</a></code> can easily be fed into <code>str_sub()</code>). For middling domains, this means drawing many <a href="https://www.evanmiller.org/feature-matrix.html">feature matrices</a> and ensuring that they are dense (e.g. consider the map family in purrr). For larger domains, this means carefully thinking about algebras and grammars, identifying the atoms of a problem and the ways in which they might be composed to solve bigger problems.</p>
<p>We decompose large problems into smaller, more tractable ones by creating and combining functions that transform data rather than by creating objects whose state changes over time.</p>
<p>Other techniques that tend to facilitate composability:</p>
<ul>
<li><p>Functions are data: this leads some of the most impactful techniques for
functional programming, which allow you to reduce code duplication.</p></li>
<li><p>Immutable objects. Enforces independence between components.</p></li>
<li><p>Partition side-effects.</p></li>
<li><p>Type-stable.</p></li>
</ul>
</div>
<div id="inclusive" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Inclusive<a class="anchor" aria-label="anchor" href="#inclusive"><i class="fas fa-link"></i></a>
</h2>
<p>We value not just the interface between the human and the computer, but also the interface between humans. We want the tidyverse to be a diverse, inclusive, and welcoming community.</p>
<ul>
<li><p>We develop educational materials that are accessible to people with many
different skill levels.</p></li>
<li><p>We prefer explicit codes of conduct.</p></li>
<li><p>We create safe and friendly communities. We believe that kindness should
be a core value of communities.</p></li>
<li><p>We think about how we can help others who are not like us
(they may be visually impaired or may not speak English).</p></li>
</ul>
<p>We also appreciate the paradox of tolerance: the only people that we do not welcome are the intolerant.</p>

</div>
</div>



<div class="chapter-nav">
<div class="prev"><a href="structure.html"><span class="header-section-number">1</span> Structure</a></div>
<div class="next"><a href="names-attribute.html"><span class="header-section-number">3</span> Names attribute</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li>
<a class="nav-link" href="#unifying-principles"><span class="header-section-number">2</span> Unifying principles</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#related-work">Related work</a></li></ul>
</li>
<li><a class="nav-link" href="#human-centered"><span class="header-section-number">2.1</span> Human centered</a></li>
<li><a class="nav-link" href="#consistent"><span class="header-section-number">2.2</span> Consistent</a></li>
<li><a class="nav-link" href="#composable"><span class="header-section-number">2.3</span> Composable</a></li>
<li><a class="nav-link" href="#inclusive"><span class="header-section-number">2.4</span> Inclusive</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="http://github.com/tidyverse/design/blob/main/unifying.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="http://github.com/tidyverse/design/edit/main/unifying.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>
</div>

  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tidyverse design guide</strong>" was written by Tidyverse team. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
