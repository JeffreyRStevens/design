<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>14 Keep defaults short and sweet | Tidyverse design guide</title>
<meta name="author" content="Tidyverse team">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="14 Keep defaults short and sweet | Tidyverse design guide">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="14 Keep defaults short and sweet | Tidyverse design guide">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<meta name="description" content="14.1 What’s the pattern? Default values should be short and sweet. This makes the function specification easier to scan.  14.2 What are some examples? The following examples, drawn from base R,...">
<meta property="og:description" content="14.1 What’s the pattern? Default values should be short and sweet. This makes the function specification easier to scan.  14.2 What are some examples? The following examples, drawn from base R,...">
<meta name="twitter:description" content="14.1 What’s the pattern? Default values should be short and sweet. This makes the function specification easier to scan.  14.2 What are some examples? The following examples, drawn from base R,...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tidyverse design guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="structure.html"><span class="header-section-number">1</span> Structure</a></li>
<li><a class="" href="unifying-principles.html"><span class="header-section-number">2</span> Unifying principles</a></li>
<li class="book-part">Implementation</li>
<li><a class="" href="names-attribute.html"><span class="header-section-number">3</span> Names attribute</a></li>
<li><a class="" href="call-data-details.html"><span class="header-section-number">4</span> Name details arguments</a></li>
<li><a class="" href="function-names.html"><span class="header-section-number">5</span> Function names</a></li>
<li class="book-part">Interface: inputs</li>
<li><a class="" href="args-hidden.html"><span class="header-section-number">6</span> Avoid hidden arguments</a></li>
<li><a class="" href="args-data-details.html"><span class="header-section-number">7</span> Data, descriptors, details</a></li>
<li><a class="" href="args-independence.html"><span class="header-section-number">8</span> Avoid dependencies between arguments</a></li>
<li><a class="" href="case-study-setnames.html"><span class="header-section-number">9</span> Case study: setNames()</a></li>
<li class="book-part">Interface: default values</li>
<li><a class="" href="def-required.html"><span class="header-section-number">10</span> Required args shouldn’t have defaults</a></li>
<li><a class="" href="cs-rep.html"><span class="header-section-number">11</span> Case study: rep()</a></li>
<li><a class="" href="def-enum.html"><span class="header-section-number">12</span> Enumerate possible options</a></li>
<li><a class="" href="def-magical.html"><span class="header-section-number">13</span> Avoid magical defaults</a></li>
<li><a class="active" href="def-short.html"><span class="header-section-number">14</span> Keep defaults short and sweet</a></li>
<li><a class="" href="def-inform.html"><span class="header-section-number">15</span> Explain important defaults</a></li>
<li><a class="" href="def-user.html"><span class="header-section-number">16</span> User settable defaults</a></li>
<li><a class="" href="cs-rgb.html"><span class="header-section-number">17</span> Case study: rgb()</a></li>
<li class="book-part">Interface: ...</li>
<li><a class="" href="dots-position.html"><span class="header-section-number">18</span> Data, dots, details</a></li>
<li><a class="" href="dots-data.html"><span class="header-section-number">19</span> Making data with …</a></li>
<li><a class="" href="dots-prefix.html"><span class="header-section-number">20</span> Dot prefix</a></li>
<li><a class="" href="dots-inspect.html"><span class="header-section-number">21</span> Inspect the dots</a></li>
<li><a class="" href="cs-mapply-pmap.html"><span class="header-section-number">22</span> Case study: mapply() vs pmap()</a></li>
<li class="book-part">Interface: outputs</li>
<li><a class="" href="out-multi.html"><span class="header-section-number">23</span> Returning multiple values</a></li>
<li><a class="" href="out-type-stability.html"><span class="header-section-number">24</span> Type-stability</a></li>
<li><a class="" href="out-vectorisation.html"><span class="header-section-number">25</span> Vectorisation</a></li>
<li><a class="" href="out-invisible.html"><span class="header-section-number">26</span> Side-effect functions should return invisibly</a></li>
<li class="book-part">Interface: errors</li>
<li><a class="" href="err-call.html"><span class="header-section-number">27</span> Error call</a></li>
<li><a class="" href="err-constructor.html"><span class="header-section-number">28</span> Error constructors</a></li>
<li class="book-part">Interface: changes</li>
<li><a class="" href="changes-multivers.html"><span class="header-section-number">29</span> Work with multiple dependency versions</a></li>
<li class="book-part">Interface: side effects</li>
<li><a class="" href="side-effect-soup.html"><span class="header-section-number">30</span> Side-effect soup</a></li>
<li><a class="" href="spooky-action.html"><span class="header-section-number">31</span> Spooky action</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="glossary.html"><span class="header-section-number">A</span> Glossary</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="http://github.com/tidyverse/design">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="def-short" class="section level1" number="14">
<h1>
<span class="header-section-number">14</span> Keep defaults short and sweet<a class="anchor" aria-label="anchor" href="#def-short"><i class="fas fa-link"></i></a>
</h1>
<div id="whats-the-pattern-3" class="section level2" number="14.1">
<h2>
<span class="header-section-number">14.1</span> What’s the pattern?<a class="anchor" aria-label="anchor" href="#whats-the-pattern-3"><i class="fas fa-link"></i></a>
</h2>
<p>Default values should be short and sweet. This makes the function specification easier to scan.</p>
</div>
<div id="what-are-some-examples-6" class="section level2" number="14.2">
<h2>
<span class="header-section-number">14.2</span> What are some examples?<a class="anchor" aria-label="anchor" href="#what-are-some-examples-6"><i class="fas fa-link"></i></a>
</h2>
<p>The following examples, drawn from base R, illustrate some functions that don’t follow this pattern:</p>
<ul>
<li><p><code><a href="https://rdrr.io/r/base/sample.html">sample.int()</a></code> uses a complicated rule to determine whether or not to use
a faster hash based method that’s only applicable in some circumstances:
<code>useHash = (!replace &amp;&amp; is.null(prob) &amp;&amp; size &lt;= n/2 &amp;&amp; n &gt; 1e+07))</code></p></li>
<li><p><code><a href="https://rdrr.io/r/base/exists.html">exists()</a></code>, which figures out if a variable exists in a given environment,
uses a complex default to determine which environment to look in if not
specifically provided:
<code>envir = (if (missing(frame)) as.environment(where) else sys.frame(frame))</code>
(NB: <code><a href="https://rdrr.io/r/base/exists.html">?exists</a></code> cheats and hides the long default in the documentation.)</p></li>
<li>
<p><code><a href="https://rdrr.io/r/stats/reshape.html">reshape()</a></code> has the longest default argument in the base and stats packages.
The <code>split</code> argument is one of two possible lists depending on the value
of the <code>sep</code> argument:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="def-short.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reshape</span>(</span>
<span id="cb88-2"><a href="def-short.html#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">split =</span> <span class="cf">if</span> (sep <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb88-3"><a href="def-short.html#cb88-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">regexp =</span> <span class="st">"[A-Za-z][0-9]"</span>, <span class="at">include =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-4"><a href="def-short.html#cb88-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb88-5"><a href="def-short.html#cb88-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">regexp =</span> sep, <span class="at">include =</span> <span class="cn">FALSE</span>, <span class="at">fixed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-6"><a href="def-short.html#cb88-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb88-7"><a href="def-short.html#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="er">)</span></span></code></pre></div>
</li>
</ul>
</div>
<div id="why-is-it-important-3" class="section level2" number="14.3">
<h2>
<span class="header-section-number">14.3</span> Why is it important?<a class="anchor" aria-label="anchor" href="#why-is-it-important-3"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="how-do-i-use-it-1" class="section level2" number="14.4">
<h2>
<span class="header-section-number">14.4</span> How do I use it?<a class="anchor" aria-label="anchor" href="#how-do-i-use-it-1"><i class="fas fa-link"></i></a>
</h2>
<p>There are three approaches:</p>
<ul>
<li><p>Set the default value to <code>NULL</code> and calculate the default only when the
argument is <code>NULL</code>. Providing a default of <code>NULL</code> signals that the argument
is optional (Chapter <a href="def-required.html#def-required">10</a>) but that the default requires
some calculation.</p></li>
<li><p>If the calculation is complex, and the user might find it useful in other
scenarios, compute it with an exported function that documents exactly
what happens.</p></li>
<li><p>If <code>NULL</code> is meaningful, so you can’t use the first approach, use a
“sentinel” object instead.</p></li>
</ul>
<div id="arg-short-null" class="section level3" number="14.4.1">
<h3>
<span class="header-section-number">14.4.1</span> <code>NULL</code> default<a class="anchor" aria-label="anchor" href="#arg-short-null"><i class="fas fa-link"></i></a>
</h3>
<p>The most common approach is to use <code>NULL</code> as a sentinel value that indicates that the argument is optional, but non-trivial. This pattern is made substantially more elegant with the infix <code>%||%</code> operator. You can either get it by importing it from rlang, or copying and pasting it in to your <code>utils.R</code>:</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">`%||%`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="va">y</span> <span class="kw">else</span> <span class="va">x</span></span></code></pre></div>
<p>This allows you to write code like this (extracted from <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">ggplot2::geom_bar()</a></code>). It computes the width by first looking at the data, then in the paramters, finally falling back to computing it from the resolution of the <code>x</code> variable:</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">width</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">width</span> <span class="op">%||%</span> <span class="va">params</span><span class="op">$</span><span class="va">width</span> <span class="op">%||%</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/resolution.html">resolution</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">x</span>, <span class="cn">FALSE</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.9</span><span class="op">)</span></span></code></pre></div>
<p>Or this code from the colourbar legend: it finds the horizontal justification by first looking in the guide settings, then in the specific theme setting, then then title element, finally using <code>0</code> if nothing else is set:</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">title.hjust</span> <span class="op">&lt;-</span> <span class="va">guide</span><span class="op">$</span><span class="va">title.hjust</span> <span class="op">%||%</span> </span>
<span>  <span class="va">theme</span><span class="op">$</span><span class="va">legend.title.align</span> <span class="op">%||%</span> </span>
<span>  <span class="va">title.theme</span><span class="op">$</span><span class="va">hjust</span> <span class="op">%||%</span> </span>
<span>  <span class="fl">0</span></span></code></pre></div>
<p>As you can see, <code>%||%</code> is particularly well suited to arguments where the default value is found through a cascading system of fallbacks.</p>
<p>Don’t use <code>%||%</code> for more complex examples. For example in <code><a href="https://rdrr.io/r/stats/reshape.html">reshape()</a></code> I would set <code>split = NULL</code> and then write:</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">split</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">sep</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">split</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>regexp <span class="op">=</span> <span class="st">"[A-Za-z][0-9]"</span>, include <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">split</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>regexp <span class="op">=</span> <span class="va">sep</span>, include <span class="op">=</span> <span class="cn">FALSE</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>(I would probably also switch on <code>is.null(sep)</code> too, to make it more clear that there is special behaviour.)</p>
</div>
<div id="helper-function" class="section level3" number="14.4.2">
<h3>
<span class="header-section-number">14.4.2</span> Helper function<a class="anchor" aria-label="anchor" href="#helper-function"><i class="fas fa-link"></i></a>
</h3>
<p>For more complicated cases, you’ll probably want to pull the code that computes the default out into a separate function, and in many cases you’ll want to export (and document) the function.</p>
<p>A good example of this pattern is <code><a href="https://readr.tidyverse.org/reference/show_progress.html">readr::show_progress()</a></code>: it’s used in every <code>read_</code> function in readr and it’s sufficiently complicated that you don’t want to copy and paste it between functions. It’s also nice to document it in its own file, rather than cluttering up file reading functions with incidental details.</p>
</div>
<div id="args-default-sentinel" class="section level3" number="14.4.3">
<h3>
<span class="header-section-number">14.4.3</span> Sentinel value<a class="anchor" aria-label="anchor" href="#args-default-sentinel"><i class="fas fa-link"></i></a>
</h3>
<p>Sometimes a default argument has a complex calculation that you don’t want to include in arguments list. You’d normally use <code>NULL</code> to indicate that it’s calculated by default, but <code>NULL</code> is a meaningful option. In that case, you can use a <strong>sentinel</strong> object.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/waiver.html">waiver</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  list()</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "waiver"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/done.html">done</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ : symbol </span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "rlang_box_done" "rlang_box"</span></span>
<span><span class="co">#&gt;  - attr(*, "empty")= logi TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/zap.html">zap</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  list()</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "rlang_zap"</span></span></code></pre></div>
<p>Or is this the wrong way around? Should the default always be <code>NULL</code> and we have a special value to use when you actually want a <code>NULL</code>?</p>
<p>Take <code><a href="https://purrr.tidyverse.org/reference/reduce.html">purrr::reduce()</a></code>: it has an optional details argument called <code>init</code>. When supplied, it serves as the initial value for the computation. But any value (including <code>NULL</code>) can a valid value. And using a sentinel value for this one case seemed like overkill.</p>
</div>
</div>
<div id="how-do-i-remediate-existing-problems" class="section level2" number="14.5">
<h2>
<span class="header-section-number">14.5</span> How do I remediate existing problems?<a class="anchor" aria-label="anchor" href="#how-do-i-remediate-existing-problems"><i class="fas fa-link"></i></a>
</h2>
<p>If you have a function with a long default, you can use any of the three approaches above to remediate it. As long as you don’t accidentally change the default value, this does not affect the function interface. Make sure you have a test for the default operation of the function before embarking on this change.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># BEFORE</span></span>
<span><span class="va">sample.int</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span>, </span>
<span>                       <span class="va">size</span> <span class="op">=</span> <span class="va">n</span>, </span>
<span>                       <span class="va">replace</span> <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                       <span class="va">prob</span> <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       <span class="va">useHash</span> <span class="op">=</span> <span class="op">(</span><span class="op">!</span><span class="va">replace</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">size</span> <span class="op">&lt;=</span> <span class="va">n</span><span class="op">/</span><span class="fl">2</span> <span class="op">&amp;&amp;</span> <span class="va">n</span> <span class="op">&gt;</span> <span class="fl">1e+07</span><span class="op">)</span></span>
<span>                       <span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">useHash</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/Internal.html">.Internal</a></span><span class="op">(</span><span class="fu">sample2</span><span class="op">(</span><span class="va">n</span>, <span class="va">size</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/Internal.html">.Internal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">size</span>, <span class="va">replace</span>, <span class="va">prob</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># AFTER</span></span>
<span><span class="va">sample.int</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span>, </span>
<span>                       <span class="va">size</span> <span class="op">=</span> <span class="va">n</span>, </span>
<span>                       <span class="va">replace</span> <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                       <span class="va">prob</span> <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       <span class="va">useHash</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">useHash</span> <span class="op">&lt;-</span> <span class="va">useHash</span> <span class="op">%||%</span> <span class="op">!</span><span class="va">replace</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">size</span> <span class="op">&lt;=</span> <span class="va">n</span><span class="op">/</span><span class="fl">2</span> <span class="op">&amp;&amp;</span> <span class="va">n</span> <span class="op">&gt;</span> <span class="fl">1e+07</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">useHash</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Internal.html">.Internal</a></span><span class="op">(</span><span class="fu">sample2</span><span class="op">(</span><span class="va">n</span>, <span class="va">size</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Internal.html">.Internal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">size</span>, <span class="va">replace</span>, <span class="va">prob</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="def-magical.html"><span class="header-section-number">13</span> Avoid magical defaults</a></div>
<div class="next"><a href="def-inform.html"><span class="header-section-number">15</span> Explain important defaults</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#def-short"><span class="header-section-number">14</span> Keep defaults short and sweet</a></li>
<li><a class="nav-link" href="#whats-the-pattern-3"><span class="header-section-number">14.1</span> What’s the pattern?</a></li>
<li><a class="nav-link" href="#what-are-some-examples-6"><span class="header-section-number">14.2</span> What are some examples?</a></li>
<li><a class="nav-link" href="#why-is-it-important-3"><span class="header-section-number">14.3</span> Why is it important?</a></li>
<li>
<a class="nav-link" href="#how-do-i-use-it-1"><span class="header-section-number">14.4</span> How do I use it?</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#arg-short-null"><span class="header-section-number">14.4.1</span> NULL default</a></li>
<li><a class="nav-link" href="#helper-function"><span class="header-section-number">14.4.2</span> Helper function</a></li>
<li><a class="nav-link" href="#args-default-sentinel"><span class="header-section-number">14.4.3</span> Sentinel value</a></li>
</ul>
</li>
<li><a class="nav-link" href="#how-do-i-remediate-existing-problems"><span class="header-section-number">14.5</span> How do I remediate existing problems?</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="http://github.com/tidyverse/design/blob/main/def-short.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="http://github.com/tidyverse/design/edit/main/def-short.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tidyverse design guide</strong>" was written by Tidyverse team. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
