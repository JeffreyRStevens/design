<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Names attribute | Tidyverse design guide</title>
  <meta name="description" content="3 Names attribute | Tidyverse design guide" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Names attribute | Tidyverse design guide" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="tidyverse/design" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Names attribute | Tidyverse design guide" />
  
  
  

<meta name="author" content="Tidyverse team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="unifying-principles.html"/>
<link rel="next" href="call-data-details.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">tidyverse design principles</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>1</b> Structure</a>
<ul>
<li class="chapter" data-level="1.1" data-path="structure.html"><a href="structure.html#implementation"><i class="fa fa-check"></i><b>1.1</b> Implementation</a></li>
<li class="chapter" data-level="1.2" data-path="structure.html"><a href="structure.html#interface"><i class="fa fa-check"></i><b>1.2</b> Interface</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="structure.html"><a href="structure.html#inputs"><i class="fa fa-check"></i><b>1.2.1</b> Inputs</a></li>
<li class="chapter" data-level="1.2.2" data-path="structure.html"><a href="structure.html#output"><i class="fa fa-check"></i><b>1.2.2</b> Output</a></li>
<li class="chapter" data-level="1.2.3" data-path="structure.html"><a href="structure.html#errors"><i class="fa fa-check"></i><b>1.2.3</b> Errors</a></li>
<li class="chapter" data-level="1.2.4" data-path="structure.html"><a href="structure.html#side-effects"><i class="fa fa-check"></i><b>1.2.4</b> Side-effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="unifying-principles.html"><a href="unifying-principles.html"><i class="fa fa-check"></i><b>2</b> Unifying principles</a>
<ul>
<li class="chapter" data-level="" data-path="unifying-principles.html"><a href="unifying-principles.html#related-work"><i class="fa fa-check"></i>Related work</a></li>
<li class="chapter" data-level="2.1" data-path="unifying-principles.html"><a href="unifying-principles.html#human-centered"><i class="fa fa-check"></i><b>2.1</b> Human centered</a></li>
<li class="chapter" data-level="2.2" data-path="unifying-principles.html"><a href="unifying-principles.html#consistent"><i class="fa fa-check"></i><b>2.2</b> Consistent</a></li>
<li class="chapter" data-level="2.3" data-path="unifying-principles.html"><a href="unifying-principles.html#composable"><i class="fa fa-check"></i><b>2.3</b> Composable</a></li>
<li class="chapter" data-level="2.4" data-path="unifying-principles.html"><a href="unifying-principles.html#inclusive"><i class="fa fa-check"></i><b>2.4</b> Inclusive</a></li>
</ul></li>
<li class="part"><span><b>I Implementation</b></span></li>
<li class="chapter" data-level="3" data-path="names-attribute.html"><a href="names-attribute.html"><i class="fa fa-check"></i><b>3</b> Names attribute</a>
<ul>
<li class="chapter" data-level="3.1" data-path="names-attribute.html"><a href="names-attribute.html#coverage-in-tidyverse-style-guide"><i class="fa fa-check"></i><b>3.1</b> Coverage in tidyverse style guide</a></li>
<li class="chapter" data-level="3.2" data-path="names-attribute.html"><a href="names-attribute.html#the-names-attribute-of-an-object"><i class="fa fa-check"></i><b>3.2</b> The <code>names</code> attribute of an object</a></li>
<li class="chapter" data-level="3.3" data-path="names-attribute.html"><a href="names-attribute.html#minimal-unique-universal"><i class="fa fa-check"></i><b>3.3</b> Minimal, unique, universal</a></li>
<li class="chapter" data-level="3.4" data-path="names-attribute.html"><a href="names-attribute.html#minimal-names"><i class="fa fa-check"></i><b>3.4</b> Minimal names</a></li>
<li class="chapter" data-level="3.5" data-path="names-attribute.html"><a href="names-attribute.html#unique-names"><i class="fa fa-check"></i><b>3.5</b> Unique names</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="names-attribute.html"><a href="names-attribute.html#making-names-unique"><i class="fa fa-check"></i><b>3.5.1</b> Making names unique</a></li>
<li class="chapter" data-level="3.5.2" data-path="names-attribute.html"><a href="names-attribute.html#roundtrips"><i class="fa fa-check"></i><b>3.5.2</b> Roundtrips</a></li>
<li class="chapter" data-level="3.5.3" data-path="names-attribute.html"><a href="names-attribute.html#when-is-minimal-better-than-unique"><i class="fa fa-check"></i><b>3.5.3</b> When is minimal better than unique?</a></li>
<li class="chapter" data-level="3.5.4" data-path="names-attribute.html"><a href="names-attribute.html#ugly-with-a-purpose"><i class="fa fa-check"></i><b>3.5.4</b> Ugly, with a purpose</a></li>
<li class="chapter" data-level="3.5.5" data-path="names-attribute.html"><a href="names-attribute.html#why-so-many-dots"><i class="fa fa-check"></i><b>3.5.5</b> Why so many dots?</a></li>
<li class="chapter" data-level="3.5.6" data-path="names-attribute.html"><a href="names-attribute.html#why-dots-in-the-first-place"><i class="fa fa-check"></i><b>3.5.6</b> Why dot(s) in the first place?</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="names-attribute.html"><a href="names-attribute.html#universal-names"><i class="fa fa-check"></i><b>3.6</b> Universal names</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="names-attribute.html"><a href="names-attribute.html#syntactic-names"><i class="fa fa-check"></i><b>3.6.1</b> Syntactic names</a></li>
<li class="chapter" data-level="3.6.2" data-path="names-attribute.html"><a href="names-attribute.html#making-an-individual-name-syntactic"><i class="fa fa-check"></i><b>3.6.2</b> Making an individual name syntactic</a></li>
<li class="chapter" data-level="3.6.3" data-path="names-attribute.html"><a href="names-attribute.html#why-universal"><i class="fa fa-check"></i><b>3.6.3</b> Why universal?</a></li>
<li class="chapter" data-level="3.6.4" data-path="names-attribute.html"><a href="names-attribute.html#making-names-universal"><i class="fa fa-check"></i><b>3.6.4</b> Making names universal</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="names-attribute.html"><a href="names-attribute.html#messaging-user-about-name-repair"><i class="fa fa-check"></i><b>3.7</b> Messaging user about name repair</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="call-data-details.html"><a href="call-data-details.html"><i class="fa fa-check"></i><b>4</b> Name details arguments</a>
<ul>
<li class="chapter" data-level="4.1" data-path="call-data-details.html"><a href="call-data-details.html#what-are-data-and-details-arguments"><i class="fa fa-check"></i><b>4.1</b> What are data and details arguments?</a></li>
<li class="chapter" data-level="4.2" data-path="call-data-details.html"><a href="call-data-details.html#whats-the-pattern"><i class="fa fa-check"></i><b>4.2</b> What’s the pattern?</a></li>
<li class="chapter" data-level="4.3" data-path="call-data-details.html"><a href="call-data-details.html#why-is-this-useful"><i class="fa fa-check"></i><b>4.3</b> Why is this useful?</a></li>
<li class="chapter" data-level="4.4" data-path="call-data-details.html"><a href="call-data-details.html#what-are-the-exceptions"><i class="fa fa-check"></i><b>4.4</b> What are the exceptions?</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="function-names.html"><a href="function-names.html"><i class="fa fa-check"></i><b>5</b> Function names</a>
<ul>
<li class="chapter" data-level="5.1" data-path="function-names.html"><a href="function-names.html#nouns-vs-verbs"><i class="fa fa-check"></i><b>5.1</b> Nouns vs verbs</a></li>
<li class="chapter" data-level="5.2" data-path="function-names.html"><a href="function-names.html#function-families"><i class="fa fa-check"></i><b>5.2</b> Function families</a></li>
<li class="chapter" data-level="5.3" data-path="function-names.html"><a href="function-names.html#length"><i class="fa fa-check"></i><b>5.3</b> Length</a></li>
<li class="chapter" data-level="5.4" data-path="function-names.html"><a href="function-names.html#conflicts"><i class="fa fa-check"></i><b>5.4</b> Conflicts</a></li>
<li class="chapter" data-level="5.5" data-path="function-names.html"><a href="function-names.html#techniques"><i class="fa fa-check"></i><b>5.5</b> Techniques</a></li>
<li class="chapter" data-level="5.6" data-path="function-names.html"><a href="function-names.html#other-good-advice"><i class="fa fa-check"></i><b>5.6</b> Other good advice</a></li>
</ul></li>
<li class="part"><span><b>II Interface: inputs</b></span></li>
<li class="chapter" data-level="6" data-path="args-hidden.html"><a href="args-hidden.html"><i class="fa fa-check"></i><b>6</b> Avoid hidden arguments</a>
<ul>
<li class="chapter" data-level="6.1" data-path="args-hidden.html"><a href="args-hidden.html#whats-the-problem"><i class="fa fa-check"></i><b>6.1</b> What’s the problem?</a></li>
<li class="chapter" data-level="6.2" data-path="args-hidden.html"><a href="args-hidden.html#what-are-some-examples"><i class="fa fa-check"></i><b>6.2</b> What are some examples?</a></li>
<li class="chapter" data-level="6.3" data-path="args-hidden.html"><a href="args-hidden.html#why-is-it-important"><i class="fa fa-check"></i><b>6.3</b> Why is it important?</a></li>
<li class="chapter" data-level="6.4" data-path="args-hidden.html"><a href="args-hidden.html#how-can-i-remediate-the-problem"><i class="fa fa-check"></i><b>6.4</b> How can I remediate the problem?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="args-data-details.html"><a href="args-data-details.html"><i class="fa fa-check"></i><b>7</b> Data, descriptors, details</a>
<ul>
<li class="chapter" data-level="7.1" data-path="args-data-details.html"><a href="args-data-details.html#whats-the-pattern-1"><i class="fa fa-check"></i><b>7.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="7.2" data-path="args-data-details.html"><a href="args-data-details.html#what-are-some-examples-1"><i class="fa fa-check"></i><b>7.2</b> What are some examples?</a></li>
<li class="chapter" data-level="7.3" data-path="args-data-details.html"><a href="args-data-details.html#why-is-it-important-1"><i class="fa fa-check"></i><b>7.3</b> Why is it important?</a></li>
<li class="chapter" data-level="7.4" data-path="args-data-details.html"><a href="args-data-details.html#how-do-i-avoid-the-problem"><i class="fa fa-check"></i><b>7.4</b> How do I avoid the problem?</a></li>
<li class="chapter" data-level="7.5" data-path="args-data-details.html"><a href="args-data-details.html#how-do-i-remediate-past-mistakes"><i class="fa fa-check"></i><b>7.5</b> How do I remediate past mistakes?</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="args-independence.html"><a href="args-independence.html"><i class="fa fa-check"></i><b>8</b> Avoid dependencies between arguments</a>
<ul>
<li class="chapter" data-level="8.1" data-path="args-independence.html"><a href="args-independence.html#whats-the-problem-1"><i class="fa fa-check"></i><b>8.1</b> What’s the problem?</a></li>
<li class="chapter" data-level="8.2" data-path="args-independence.html"><a href="args-independence.html#what-are-some-examples-2"><i class="fa fa-check"></i><b>8.2</b> What are some examples?</a></li>
<li class="chapter" data-level="8.3" data-path="args-independence.html"><a href="args-independence.html#why-is-this-important"><i class="fa fa-check"></i><b>8.3</b> Why is this important?</a></li>
<li class="chapter" data-level="8.4" data-path="args-independence.html"><a href="args-independence.html#how-do-i-remediate"><i class="fa fa-check"></i><b>8.4</b> How do I remediate?</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="args-independence.html"><a href="args-independence.html#cs-fct-lump"><i class="fa fa-check"></i><b>8.4.1</b> Case study: <code>fct_lump()</code></a></li>
<li class="chapter" data-level="8.4.2" data-path="args-independence.html"><a href="args-independence.html#case-study-grepl-vs-stringrstr_detect"><i class="fa fa-check"></i><b>8.4.2</b> Case study: <code>grepl()</code> vs <code>stringr::str_detect()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="case-study-setnames.html"><a href="case-study-setnames.html"><i class="fa fa-check"></i><b>9</b> Case study: <code>setNames()</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="case-study-setnames.html"><a href="case-study-setnames.html#what-does-setnames-do"><i class="fa fa-check"></i><b>9.1</b> What does <code>setNames()</code> do?</a></li>
<li class="chapter" data-level="9.2" data-path="case-study-setnames.html"><a href="case-study-setnames.html#how-can-we-improve-the-names"><i class="fa fa-check"></i><b>9.2</b> How can we improve the names?</a></li>
<li class="chapter" data-level="9.3" data-path="case-study-setnames.html"><a href="case-study-setnames.html#what-about-the-default-values"><i class="fa fa-check"></i><b>9.3</b> What about the default values?</a></li>
<li class="chapter" data-level="9.4" data-path="case-study-setnames.html"><a href="case-study-setnames.html#what-about-bad-inputs"><i class="fa fa-check"></i><b>9.4</b> What about bad inputs?</a></li>
<li class="chapter" data-level="9.5" data-path="case-study-setnames.html"><a href="case-study-setnames.html#how-could-we-extend-this-function"><i class="fa fa-check"></i><b>9.5</b> How could we extend this function?</a></li>
<li class="chapter" data-level="9.6" data-path="case-study-setnames.html"><a href="case-study-setnames.html#compared-to-rlangset_names"><i class="fa fa-check"></i><b>9.6</b> Compared to <code>rlang::set_names()</code></a></li>
</ul></li>
<li class="part"><span><b>III Interface: default values</b></span></li>
<li class="chapter" data-level="10" data-path="def-required.html"><a href="def-required.html"><i class="fa fa-check"></i><b>10</b> Required args shouldn’t have defaults</a>
<ul>
<li class="chapter" data-level="10.1" data-path="def-required.html"><a href="def-required.html#whats-the-problem-2"><i class="fa fa-check"></i><b>10.1</b> What’s the problem?</a></li>
<li class="chapter" data-level="10.2" data-path="def-required.html"><a href="def-required.html#what-are-some-examples-3"><i class="fa fa-check"></i><b>10.2</b> What are some examples?</a></li>
<li class="chapter" data-level="10.3" data-path="def-required.html"><a href="def-required.html#what-are-the-exceptions-1"><i class="fa fa-check"></i><b>10.3</b> What are the exceptions?</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="def-required.html"><a href="def-required.html#args-mutually-exclusive"><i class="fa fa-check"></i><b>10.3.1</b> Pair of mututally exclusive arguments</a></li>
<li class="chapter" data-level="10.3.2" data-path="def-required.html"><a href="def-required.html#args-compound"><i class="fa fa-check"></i><b>10.3.2</b> One compound argument vs multiple simple arguments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="cs-rep.html"><a href="cs-rep.html"><i class="fa fa-check"></i><b>11</b> Case study: <code>rep()</code></a>
<ul>
<li class="chapter" data-level="11.1" data-path="cs-rep.html"><a href="cs-rep.html#what-does-rep-do"><i class="fa fa-check"></i><b>11.1</b> What does <code>rep()</code> do?</a></li>
<li class="chapter" data-level="11.2" data-path="cs-rep.html"><a href="cs-rep.html#what-makes-this-function-hard-to-understand"><i class="fa fa-check"></i><b>11.2</b> What makes this function hard to understand?</a></li>
<li class="chapter" data-level="11.3" data-path="cs-rep.html"><a href="cs-rep.html#how-might-we-improve-the-situation"><i class="fa fa-check"></i><b>11.3</b> How might we improve the situation?</a></li>
<li class="chapter" data-level="11.4" data-path="cs-rep.html"><a href="cs-rep.html#dealing-with-bad-inputs"><i class="fa fa-check"></i><b>11.4</b> Dealing with bad inputs</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="def-enum.html"><a href="def-enum.html"><i class="fa fa-check"></i><b>12</b> Enumerate possible options</a>
<ul>
<li class="chapter" data-level="12.1" data-path="def-enum.html"><a href="def-enum.html#whats-the-pattern-2"><i class="fa fa-check"></i><b>12.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="12.2" data-path="def-enum.html"><a href="def-enum.html#what-are-some-examples-4"><i class="fa fa-check"></i><b>12.2</b> What are some examples?</a></li>
<li class="chapter" data-level="12.3" data-path="def-enum.html"><a href="def-enum.html#why-is-it-important-2"><i class="fa fa-check"></i><b>12.3</b> Why is it important?</a></li>
<li class="chapter" data-level="12.4" data-path="def-enum.html"><a href="def-enum.html#how-do-i-use-it"><i class="fa fa-check"></i><b>12.4</b> How do I use it?</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="def-enum.html"><a href="def-enum.html#how-keep-defaults-short"><i class="fa fa-check"></i><b>12.4.1</b> How keep defaults short?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="def-magical.html"><a href="def-magical.html"><i class="fa fa-check"></i><b>13</b> Avoid magical defaults</a>
<ul>
<li class="chapter" data-level="13.1" data-path="def-magical.html"><a href="def-magical.html#whats-the-problem-3"><i class="fa fa-check"></i><b>13.1</b> What’s the problem?</a></li>
<li class="chapter" data-level="13.2" data-path="def-magical.html"><a href="def-magical.html#what-are-some-examples-5"><i class="fa fa-check"></i><b>13.2</b> What are some examples?</a></li>
<li class="chapter" data-level="13.3" data-path="def-magical.html"><a href="def-magical.html#what-are-the-exceptions-2"><i class="fa fa-check"></i><b>13.3</b> What are the exceptions?</a></li>
<li class="chapter" data-level="13.4" data-path="def-magical.html"><a href="def-magical.html#what-causes-the-problem"><i class="fa fa-check"></i><b>13.4</b> What causes the problem?</a></li>
<li class="chapter" data-level="13.5" data-path="def-magical.html"><a href="def-magical.html#how-do-i-remediate-the-problem"><i class="fa fa-check"></i><b>13.5</b> How do I remediate the problem?</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="def-short.html"><a href="def-short.html"><i class="fa fa-check"></i><b>14</b> Keep defaults short and sweet</a>
<ul>
<li class="chapter" data-level="14.1" data-path="def-short.html"><a href="def-short.html#whats-the-pattern-3"><i class="fa fa-check"></i><b>14.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="14.2" data-path="def-short.html"><a href="def-short.html#what-are-some-examples-6"><i class="fa fa-check"></i><b>14.2</b> What are some examples?</a></li>
<li class="chapter" data-level="14.3" data-path="def-short.html"><a href="def-short.html#why-is-it-important-3"><i class="fa fa-check"></i><b>14.3</b> Why is it important?</a></li>
<li class="chapter" data-level="14.4" data-path="def-short.html"><a href="def-short.html#how-do-i-use-it-1"><i class="fa fa-check"></i><b>14.4</b> How do I use it?</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="def-short.html"><a href="def-short.html#arg-short-null"><i class="fa fa-check"></i><b>14.4.1</b> <code>NULL</code> default</a></li>
<li class="chapter" data-level="14.4.2" data-path="def-short.html"><a href="def-short.html#helper-function"><i class="fa fa-check"></i><b>14.4.2</b> Helper function</a></li>
<li class="chapter" data-level="14.4.3" data-path="def-short.html"><a href="def-short.html#args-default-sentinel"><i class="fa fa-check"></i><b>14.4.3</b> Sentinel value</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="def-short.html"><a href="def-short.html#how-do-i-remediate-existing-problems"><i class="fa fa-check"></i><b>14.5</b> How do I remediate existing problems?</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="def-inform.html"><a href="def-inform.html"><i class="fa fa-check"></i><b>15</b> Explain important defaults</a>
<ul>
<li class="chapter" data-level="15.1" data-path="def-inform.html"><a href="def-inform.html#whats-the-pattern-4"><i class="fa fa-check"></i><b>15.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="15.2" data-path="def-inform.html"><a href="def-inform.html#what-are-some-examples-7"><i class="fa fa-check"></i><b>15.2</b> What are some examples?</a></li>
<li class="chapter" data-level="15.3" data-path="def-inform.html"><a href="def-inform.html#why-is-it-important-4"><i class="fa fa-check"></i><b>15.3</b> Why is it important?</a></li>
<li class="chapter" data-level="15.4" data-path="def-inform.html"><a href="def-inform.html#how-can-i-use-it"><i class="fa fa-check"></i><b>15.4</b> How can I use it?</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="def-user.html"><a href="def-user.html"><i class="fa fa-check"></i><b>16</b> User settable defaults</a>
<ul>
<li class="chapter" data-level="16.1" data-path="def-user.html"><a href="def-user.html#whats-the-pattern-5"><i class="fa fa-check"></i><b>16.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="16.2" data-path="def-user.html"><a href="def-user.html#what-are-some-examples-8"><i class="fa fa-check"></i><b>16.2</b> What are some examples?</a></li>
<li class="chapter" data-level="16.3" data-path="def-user.html"><a href="def-user.html#why-is-it-important-5"><i class="fa fa-check"></i><b>16.3</b> Why is it important?</a></li>
<li class="chapter" data-level="16.4" data-path="def-user.html"><a href="def-user.html#what-are-the-exceptions-3"><i class="fa fa-check"></i><b>16.4</b> What are the exceptions?</a></li>
<li class="chapter" data-level="16.5" data-path="def-user.html"><a href="def-user.html#how-do-i-use-it-2"><i class="fa fa-check"></i><b>16.5</b> How do I use it?</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="cs-rgb.html"><a href="cs-rgb.html"><i class="fa fa-check"></i><b>17</b> Case study: <code>rgb()</code></a></li>
<li class="part"><span><b>IV Interface: <code>...</code></b></span></li>
<li class="chapter" data-level="18" data-path="dots-position.html"><a href="dots-position.html"><i class="fa fa-check"></i><b>18</b> Data, dots, details</a>
<ul>
<li class="chapter" data-level="18.1" data-path="dots-position.html"><a href="dots-position.html#whats-the-pattern-6"><i class="fa fa-check"></i><b>18.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="18.2" data-path="dots-position.html"><a href="dots-position.html#what-are-some-examples-9"><i class="fa fa-check"></i><b>18.2</b> What are some examples?</a></li>
<li class="chapter" data-level="18.3" data-path="dots-position.html"><a href="dots-position.html#what-is-it-important"><i class="fa fa-check"></i><b>18.3</b> What is it important?</a></li>
<li class="chapter" data-level="18.4" data-path="dots-position.html"><a href="dots-position.html#how-do-i-do-it"><i class="fa fa-check"></i><b>18.4</b> How do I do it?</a></li>
<li class="chapter" data-level="18.5" data-path="dots-position.html"><a href="dots-position.html#how-do-i-remediate-it"><i class="fa fa-check"></i><b>18.5</b> How do I remediate it?</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="dots-data.html"><a href="dots-data.html"><i class="fa fa-check"></i><b>19</b> Making data with …</a>
<ul>
<li class="chapter" data-level="19.1" data-path="dots-data.html"><a href="dots-data.html#whats-the-problem-4"><i class="fa fa-check"></i><b>19.1</b> What’s the problem?</a></li>
<li class="chapter" data-level="19.2" data-path="dots-data.html"><a href="dots-data.html#what-are-some-examples-10"><i class="fa fa-check"></i><b>19.2</b> What are some examples?</a></li>
<li class="chapter" data-level="19.3" data-path="dots-data.html"><a href="dots-data.html#why-is-it-important-6"><i class="fa fa-check"></i><b>19.3</b> Why is it important?</a></li>
<li class="chapter" data-level="19.4" data-path="dots-data.html"><a href="dots-data.html#what-are-the-exceptions-4"><i class="fa fa-check"></i><b>19.4</b> What are the exceptions?</a></li>
<li class="chapter" data-level="19.5" data-path="dots-data.html"><a href="dots-data.html#how-can-remediate-it"><i class="fa fa-check"></i><b>19.5</b> How can remediate it?</a></li>
<li class="chapter" data-level="19.6" data-path="dots-data.html"><a href="dots-data.html#how-can-i-protect-myself"><i class="fa fa-check"></i><b>19.6</b> How can I protect myself?</a></li>
<li class="chapter" data-level="19.7" data-path="dots-data.html"><a href="dots-data.html#selecting-variables"><i class="fa fa-check"></i><b>19.7</b> Selecting variables</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="dots-prefix.html"><a href="dots-prefix.html"><i class="fa fa-check"></i><b>20</b> Dot prefix</a>
<ul>
<li class="chapter" data-level="20.1" data-path="dots-prefix.html"><a href="dots-prefix.html#whats-the-pattern-7"><i class="fa fa-check"></i><b>20.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="20.2" data-path="dots-prefix.html"><a href="dots-prefix.html#what-are-some-examples-11"><i class="fa fa-check"></i><b>20.2</b> What are some examples?</a></li>
<li class="chapter" data-level="20.3" data-path="dots-prefix.html"><a href="dots-prefix.html#case-study-dplyr-verbs"><i class="fa fa-check"></i><b>20.3</b> Case study: dplyr verbs</a></li>
<li class="chapter" data-level="20.4" data-path="dots-prefix.html"><a href="dots-prefix.html#other-approaches-in-base-r"><i class="fa fa-check"></i><b>20.4</b> Other approaches in base R</a></li>
<li class="chapter" data-level="20.5" data-path="dots-prefix.html"><a href="dots-prefix.html#what-are-the-exceptions-5"><i class="fa fa-check"></i><b>20.5</b> What are the exceptions?</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="dots-inspect.html"><a href="dots-inspect.html"><i class="fa fa-check"></i><b>21</b> Inspect the dots</a>
<ul>
<li class="chapter" data-level="21.1" data-path="dots-inspect.html"><a href="dots-inspect.html#whats-the-pattern-8"><i class="fa fa-check"></i><b>21.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="21.2" data-path="dots-inspect.html"><a href="dots-inspect.html#what-are-some-examples-12"><i class="fa fa-check"></i><b>21.2</b> What are some examples?</a></li>
<li class="chapter" data-level="21.3" data-path="dots-inspect.html"><a href="dots-inspect.html#how-do-i-do-it-1"><i class="fa fa-check"></i><b>21.3</b> How do I do it?</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="dots-inspect.html"><a href="dots-inspect.html#what-are-the-limitations"><i class="fa fa-check"></i><b>21.3.1</b> What are the limitations?</a></li>
<li class="chapter" data-level="21.3.2" data-path="dots-inspect.html"><a href="dots-inspect.html#what-are-other-uses"><i class="fa fa-check"></i><b>21.3.2</b> What are other uses?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="cs-mapply-pmap.html"><a href="cs-mapply-pmap.html"><i class="fa fa-check"></i><b>22</b> Case study: <code>mapply()</code> vs <code>pmap()</code></a></li>
<li class="part"><span><b>V Interface: outputs</b></span></li>
<li class="chapter" data-level="23" data-path="out-multi.html"><a href="out-multi.html"><i class="fa fa-check"></i><b>23</b> Returning multiple values</a>
<ul>
<li class="chapter" data-level="23.1" data-path="out-multi.html"><a href="out-multi.html#different-sizes"><i class="fa fa-check"></i><b>23.1</b> Different sizes</a></li>
<li class="chapter" data-level="23.2" data-path="out-multi.html"><a href="out-multi.html#same-size"><i class="fa fa-check"></i><b>23.2</b> Same size</a></li>
<li class="chapter" data-level="23.3" data-path="out-multi.html"><a href="out-multi.html#case-study-str_locate"><i class="fa fa-check"></i><b>23.3</b> Case study: <code>str_locate()</code></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="out-type-stability.html"><a href="out-type-stability.html"><i class="fa fa-check"></i><b>24</b> Type-stability</a>
<ul>
<li class="chapter" data-level="24.1" data-path="out-type-stability.html"><a href="out-type-stability.html#simple-examples"><i class="fa fa-check"></i><b>24.1</b> Simple examples</a></li>
<li class="chapter" data-level="24.2" data-path="out-type-stability.html"><a href="out-type-stability.html#more-complicated-examples"><i class="fa fa-check"></i><b>24.2</b> More complicated examples</a></li>
<li class="chapter" data-level="24.3" data-path="out-type-stability.html"><a href="out-type-stability.html#challenge-the-median"><i class="fa fa-check"></i><b>24.3</b> Challenge: the median</a></li>
<li class="chapter" data-level="24.4" data-path="out-type-stability.html"><a href="out-type-stability.html#exercises"><i class="fa fa-check"></i><b>24.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="out-vectorisation.html"><a href="out-vectorisation.html"><i class="fa fa-check"></i><b>25</b> Vectorisation</a></li>
<li class="chapter" data-level="26" data-path="out-invisible.html"><a href="out-invisible.html"><i class="fa fa-check"></i><b>26</b> Side-effect functions should return invisibly</a>
<ul>
<li class="chapter" data-level="26.1" data-path="out-invisible.html"><a href="out-invisible.html#whats-the-pattern-9"><i class="fa fa-check"></i><b>26.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="26.2" data-path="out-invisible.html"><a href="out-invisible.html#what-are-some-examples-13"><i class="fa fa-check"></i><b>26.2</b> What are some examples?</a></li>
<li class="chapter" data-level="26.3" data-path="out-invisible.html"><a href="out-invisible.html#why-is-it-important-7"><i class="fa fa-check"></i><b>26.3</b> Why is it important?</a></li>
</ul></li>
<li class="part"><span><b>VI Interface: errors</b></span></li>
<li class="chapter" data-level="27" data-path="err-call.html"><a href="err-call.html"><i class="fa fa-check"></i><b>27</b> Error call</a></li>
<li class="chapter" data-level="28" data-path="err-constructor.html"><a href="err-constructor.html"><i class="fa fa-check"></i><b>28</b> Error constructors</a>
<ul>
<li class="chapter" data-level="28.1" data-path="err-constructor.html"><a href="err-constructor.html#whats-the-pattern-10"><i class="fa fa-check"></i><b>28.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="28.2" data-path="err-constructor.html"><a href="err-constructor.html#why-is-this-important-1"><i class="fa fa-check"></i><b>28.2</b> Why is this important?</a></li>
<li class="chapter" data-level="28.3" data-path="err-constructor.html"><a href="err-constructor.html#what-does-an-error-constructor-do"><i class="fa fa-check"></i><b>28.3</b> What does an error constructor do?</a></li>
<li class="chapter" data-level="28.4" data-path="err-constructor.html"><a href="err-constructor.html#how-do-i-test"><i class="fa fa-check"></i><b>28.4</b> How do I test?</a>
<ul>
<li class="chapter" data-level="28.4.1" data-path="err-constructor.html"><a href="err-constructor.html#test-the-constructor"><i class="fa fa-check"></i><b>28.4.1</b> Test the constructor</a></li>
<li class="chapter" data-level="28.4.2" data-path="err-constructor.html"><a href="err-constructor.html#test-usage"><i class="fa fa-check"></i><b>28.4.2</b> Test usage</a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="err-constructor.html"><a href="err-constructor.html#error-hierarchies"><i class="fa fa-check"></i><b>28.5</b> Error hierarchies</a></li>
</ul></li>
<li class="part"><span><b>VII Interface: changes</b></span></li>
<li class="chapter" data-level="29" data-path="changes-multivers.html"><a href="changes-multivers.html"><i class="fa fa-check"></i><b>29</b> Work with multiple dependency versions</a>
<ul>
<li class="chapter" data-level="29.1" data-path="changes-multivers.html"><a href="changes-multivers.html#whats-the-pattern-11"><i class="fa fa-check"></i><b>29.1</b> What’s the pattern?</a></li>
<li class="chapter" data-level="29.2" data-path="changes-multivers.html"><a href="changes-multivers.html#writing-code"><i class="fa fa-check"></i><b>29.2</b> Writing code</a>
<ul>
<li class="chapter" data-level="29.2.1" data-path="changes-multivers.html"><a href="changes-multivers.html#case-study-tidyr"><i class="fa fa-check"></i><b>29.2.1</b> Case study: tidyr</a></li>
</ul></li>
<li class="chapter" data-level="29.3" data-path="changes-multivers.html"><a href="changes-multivers.html#testing-with-multiple-package-versions"><i class="fa fa-check"></i><b>29.3</b> Testing with multiple package versions</a></li>
<li class="chapter" data-level="29.4" data-path="changes-multivers.html"><a href="changes-multivers.html#using-only-the-new-version"><i class="fa fa-check"></i><b>29.4</b> Using only the new version</a></li>
</ul></li>
<li class="part"><span><b>VIII Interface: side effects</b></span></li>
<li class="chapter" data-level="30" data-path="side-effect-soup.html"><a href="side-effect-soup.html"><i class="fa fa-check"></i><b>30</b> Side-effect soup</a>
<ul>
<li class="chapter" data-level="30.1" data-path="side-effect-soup.html"><a href="side-effect-soup.html#what-is-a-side-effect"><i class="fa fa-check"></i><b>30.1</b> What is a side-effect?</a>
<ul>
<li class="chapter" data-level="30.1.1" data-path="side-effect-soup.html"><a href="side-effect-soup.html#user-feedback"><i class="fa fa-check"></i><b>30.1.1</b> User feedback</a></li>
<li class="chapter" data-level="30.1.2" data-path="side-effect-soup.html"><a href="side-effect-soup.html#global-state"><i class="fa fa-check"></i><b>30.1.2</b> Global state</a></li>
</ul></li>
<li class="chapter" data-level="30.2" data-path="side-effect-soup.html"><a href="side-effect-soup.html#what-are-some-examples-14"><i class="fa fa-check"></i><b>30.2</b> What are some examples?</a></li>
<li class="chapter" data-level="30.3" data-path="side-effect-soup.html"><a href="side-effect-soup.html#why-is-it-bad"><i class="fa fa-check"></i><b>30.3</b> Why is it bad?</a></li>
<li class="chapter" data-level="30.4" data-path="side-effect-soup.html"><a href="side-effect-soup.html#how-avoid-it"><i class="fa fa-check"></i><b>30.4</b> How avoid it?</a>
<ul>
<li class="chapter" data-level="30.4.1" data-path="side-effect-soup.html"><a href="side-effect-soup.html#localise-side-effects"><i class="fa fa-check"></i><b>30.4.1</b> Localise side-effects</a></li>
<li class="chapter" data-level="30.4.2" data-path="side-effect-soup.html"><a href="side-effect-soup.html#extract-side-effects"><i class="fa fa-check"></i><b>30.4.2</b> Extract side-effects</a></li>
<li class="chapter" data-level="30.4.3" data-path="side-effect-soup.html"><a href="side-effect-soup.html#make-side-effects-noisy"><i class="fa fa-check"></i><b>30.4.3</b> Make side-effects noisy</a></li>
<li class="chapter" data-level="30.4.4" data-path="side-effect-soup.html"><a href="side-effect-soup.html#provide-an-argument-to-suppress"><i class="fa fa-check"></i><b>30.4.4</b> Provide an argument to suppress</a></li>
<li class="chapter" data-level="30.4.5" data-path="side-effect-soup.html"><a href="side-effect-soup.html#use-the-print-method"><i class="fa fa-check"></i><b>30.4.5</b> Use the <code>print()</code> method</a></li>
<li class="chapter" data-level="30.4.6" data-path="side-effect-soup.html"><a href="side-effect-soup.html#make-easy-to-undo"><i class="fa fa-check"></i><b>30.4.6</b> Make easy to undo</a></li>
</ul></li>
<li class="chapter" data-level="30.5" data-path="side-effect-soup.html"><a href="side-effect-soup.html#package-considerations"><i class="fa fa-check"></i><b>30.5</b> Package considerations</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="spooky-action.html"><a href="spooky-action.html"><i class="fa fa-check"></i><b>31</b> Spooky action</a>
<ul>
<li class="chapter" data-level="31.1" data-path="spooky-action.html"><a href="spooky-action.html#whats-the-problem-5"><i class="fa fa-check"></i><b>31.1</b> What’s the problem?</a></li>
<li class="chapter" data-level="31.2" data-path="spooky-action.html"><a href="spooky-action.html#what-precisely-is-a-spooky-action"><i class="fa fa-check"></i><b>31.2</b> What precisely is a spooky action?</a></li>
<li class="chapter" data-level="31.3" data-path="spooky-action.html"><a href="spooky-action.html#how-can-i-remediate-spooky-actions"><i class="fa fa-check"></i><b>31.3</b> How can I remediate spooky actions?</a>
<ul>
<li class="chapter" data-level="31.3.1" data-path="spooky-action.html"><a href="spooky-action.html#parameterise-the-action"><i class="fa fa-check"></i><b>31.3.1</b> Parameterise the action</a></li>
<li class="chapter" data-level="31.3.2" data-path="spooky-action.html"><a href="spooky-action.html#advertise-the-action-with-a-clear-name"><i class="fa fa-check"></i><b>31.3.2</b> Advertise the action with a clear name</a></li>
<li class="chapter" data-level="31.3.3" data-path="spooky-action.html"><a href="spooky-action.html#ask-for-confirmation"><i class="fa fa-check"></i><b>31.3.3</b> Ask for confirmation</a></li>
<li class="chapter" data-level="31.3.4" data-path="spooky-action.html"><a href="spooky-action.html#advertise-the-side-effects"><i class="fa fa-check"></i><b>31.3.4</b> Advertise the side-effects</a></li>
</ul></li>
<li class="chapter" data-level="31.4" data-path="spooky-action.html"><a href="spooky-action.html#case-studies"><i class="fa fa-check"></i><b>31.4</b> Case studies</a>
<ul>
<li class="chapter" data-level="31.4.1" data-path="spooky-action.html"><a href="spooky-action.html#save-and-load"><i class="fa fa-check"></i><b>31.4.1</b> <code>save()</code> and <code>load()</code></a></li>
<li class="chapter" data-level="31.4.2" data-path="spooky-action.html"><a href="spooky-action.html#usethis"><i class="fa fa-check"></i><b>31.4.2</b> usethis</a></li>
<li class="chapter" data-level="31.4.3" data-path="spooky-action.html"><a href="spooky-action.html#section"><i class="fa fa-check"></i><b>31.4.3</b> <code>&lt;&lt;-</code></a></li>
<li class="chapter" data-level="31.4.4" data-path="spooky-action.html"><a href="spooky-action.html#assign-in-a-for-loop"><i class="fa fa-check"></i><b>31.4.4</b> <code>assign()</code> in a for loop</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>A</b> Glossary</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tidyverse design guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="names-attribute" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Names attribute<a href="names-attribute.html#names-attribute" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="coverage-in-tidyverse-style-guide" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Coverage in tidyverse style guide<a href="names-attribute.html#coverage-in-tidyverse-style-guide" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Existing name-related topics in <a href="http://style.tidyverse.org" class="uri">http://style.tidyverse.org</a></p>
<ul>
<li><a href="http://style.tidyverse.org/files.html#names">File names</a></li>
<li><a href="http://style.tidyverse.org/syntax.html#object-names">Object names</a></li>
<li><a href="http://style.tidyverse.org/syntax.html#argument-names">Argument names</a></li>
<li><a href="http://style.tidyverse.org/functions.html#naming">Function names</a></li>
</ul>
</div>
<div id="the-names-attribute-of-an-object" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> The <code>names</code> attribute of an object<a href="names-attribute.html#the-names-attribute-of-an-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here we address how to manage the <code>names</code> attribute of an object. Our initial thinking was motivated by how to handle the column or variable names of a tibble, but is evolving into a name-handling strategy for vectors, in general.</p>
<p>The name repair described below is exposed to users via the <code>.name_repair</code> argument of <a href="https://tibble.tidyverse.org/reference/tibble.html">tibble::tibble()</a>, <a href="https://tibble.tidyverse.org/reference/as_tibble.html">tibble::as_tibble()</a>, <a href="https://readxl.tidyverse.org/reference/read_excel.html">readxl::read_excel()</a>, and, eventually other packages in the tidyverse. This work was initiated in the tibble package, but is migrating to the vctrs package. <em>Name repair was first introduced in <a href="https://tibble.tidyverse.org/news/index.html#tibble-2-0-0">tibble v2.0.0</a> and this write-up is being rendered with tibble v3.1.7 and vctrs v0.4.1.</em></p>
<p>These are the kind of names we’re talking about:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="names-attribute.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## variable names</span></span>
<span id="cb1-2"><a href="names-attribute.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(iris)</span>
<span id="cb1-3"><a href="names-attribute.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</span></span>
<span id="cb1-4"><a href="names-attribute.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="names-attribute.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ChickWeight)</span>
<span id="cb1-6"><a href="names-attribute.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;weight&quot; &quot;Time&quot;   &quot;Chick&quot;  &quot;Diet&quot;</span></span>
<span id="cb1-7"><a href="names-attribute.html#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="names-attribute.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="do">## names along a vector</span></span>
<span id="cb1-9"><a href="names-attribute.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(euro)</span>
<span id="cb1-10"><a href="names-attribute.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;ATS&quot; &quot;BEF&quot; &quot;DEM&quot; &quot;ESP&quot; &quot;FIM&quot; &quot;FRF&quot; &quot;IEP&quot; &quot;ITL&quot; &quot;LUF&quot; &quot;NLG&quot; &quot;PTE&quot;</span></span></code></pre></div>
</div>
<div id="minimal-unique-universal" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Minimal, unique, universal<a href="names-attribute.html#minimal-unique-universal" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We identify three nested levels of naminess that are practically useful:</p>
<ul>
<li>Minimal: The <code>names</code> attribute is not <code>NULL</code>. The name of an unnamed element
is <code>""</code> (the empty string) and never <code>NA</code>.</li>
<li>Unique: No element of <code>names</code> appears more than once. A couple specific
names are also forbidden in unique names, such as <code>""</code> (the empty string).
<ul>
<li>All columns can be accessed by name via <code>df[["name"]]</code> and, more
generally, by quoting with backticks: <code>df$`name`</code>,
<code>subset(df, select = `name`)</code>, and <code>dplyr::select(df, `name`)</code>.</li>
</ul></li>
<li>Universal: The <code>names</code> are unique and syntactic.
<ul>
<li>Names work everywhere, without quoting: <code>df$name</code> and
<code>lm(name1 ~ name2, data = df)</code> and <code>dplyr::select(df, name)</code> all work.</li>
</ul></li>
</ul>
<p>Below we give more details and describe implementation.</p>
</div>
<div id="minimal-names" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Minimal names<a href="names-attribute.html#minimal-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Minimal</strong> names exist. The <code>names</code> attribute is not <code>NULL</code>. The name of an unnamed element is <code>""</code> (the empty string) and never <code>NA</code>.</p>
<p>Consider an unnamed vector, i.e. it has names attribute of <code>NULL</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="names-attribute.html#cb2-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb2-2"><a href="names-attribute.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x)</span>
<span id="cb2-3"><a href="names-attribute.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Repair the names to make them minimal.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="names-attribute.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Figure out where `set_minimal_names()` ended up when name repair moved</span></span>
<span id="cb3-2"><a href="names-attribute.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># from tibble to vctrs, then update this chunk. Use rlang in the meantime.</span></span>
<span id="cb3-3"><a href="names-attribute.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="names-attribute.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># x &lt;- tibble:::set_minimal_names(x)</span></span>
<span id="cb3-5"><a href="names-attribute.html#cb3-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">set_names</span>(x, rlang<span class="sc">::</span><span class="fu">names2</span>(x))</span>
<span id="cb3-6"><a href="names-attribute.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x)</span></code></pre></div>
<p>Minimal names appear to be a useful baseline requirement, if the <code>names</code> attribute of an object is going to be actively managed. Why? General name handling and repair can be implemented more simply if the baseline strategy guarantees that <code>names(x)</code> returns a character vector of the correct length with no <code>NA</code>s.</p>
<p>This is also a reasonable interpretation of base R’s <em>intent</em> for named vectors, based on the docs for <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/names.html"><code>names()</code></a>, although base R’s implementation/enforcement of this is uneven. From <code>?names</code>:</p>
<blockquote>
<p>The name <code>""</code> is special: it is used to indicate that there is no name
associated with an element of a (atomic or generic) vector. Subscripting by
<code>""</code> will match nothing (not even elements which have no name).</p>
<p>A name can be character <code>NA</code>, but such a name will never be matched and is
likely to lead to confusion.</p>
</blockquote>
<p><code>tbl_df</code> objects created by <a href="https://tibble.tidyverse.org/reference/tibble.html">tibble::tibble()</a> and <a href="https://tibble.tidyverse.org/reference/as_tibble.html">tibble::as_tibble()</a> have variable names that are minimal, at the very least.</p>
<p>The function <a href="https://rlang.r-lib.org/reference/names2.html">rlang::names2()</a> returns the names of an object, after making them minimal.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="names-attribute.html#cb4-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb4-2"><a href="names-attribute.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="names-attribute.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x)</span>
<span id="cb4-4"><a href="names-attribute.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb4-5"><a href="names-attribute.html#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="names-attribute.html#cb4-6" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">names2</span>(x)</span>
<span id="cb4-7"><a href="names-attribute.html#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;&quot; &quot;&quot; &quot;&quot;</span></span></code></pre></div>
</div>
<div id="unique-names" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Unique names<a href="names-attribute.html#unique-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Unique</strong> names meet the requirements for minimal and have no duplicates. In the tidyverse, we go further and repair a few specific names: <code>""</code> (the empty string), <code>...</code> (R’s ellipsis or “dots” construct), and <code>..j</code> where <code>j</code> is a number. They are basically all treated like <code>""</code>, which is always repaired.</p>
<p>Example of unique-ified names:</p>
<pre><code>original unique-ified
      &quot;&quot;         ...1
       x        x...2
      &quot;&quot;         ...3
     ...         ...4
       y            y
       x        x...6</code></pre>
<p>This augmented definition of unique has a specific motivation: it ensures that each element can be identified by name, at least when protected by backtick quotes. Literally, all of these work:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="names-attribute.html#cb6-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">&quot;name&quot;</span>]]</span>
<span id="cb6-2"><a href="names-attribute.html#cb6-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span><span class="st">`</span><span class="at">name</span><span class="st">`</span></span>
<span id="cb6-3"><a href="names-attribute.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(df, <span class="st">`</span><span class="at">name</span><span class="st">`</span>)</span>
<span id="cb6-4"><a href="names-attribute.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, <span class="at">select =</span> <span class="st">`</span><span class="at">name</span><span class="st">`</span>)</span>
<span id="cb6-5"><a href="names-attribute.html#cb6-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="st">`</span><span class="at">name</span><span class="st">`</span>)</span></code></pre></div>
<p>This has practical significance for variable names inside a data frame, because so many workflows rely on indexing by name. Note that uniqueness refers implicitly to a vector of names.</p>
<p>Let’s explore a few edge cases: A single dot followed by a number, <code>.j</code>, does not need repair.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="names-attribute.html#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">`</span><span class="at">.1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;ok&quot;</span>)</span>
<span id="cb7-2"><a href="names-attribute.html#cb7-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span><span class="st">`</span><span class="at">.1</span><span class="st">`</span></span>
<span id="cb7-3"><a href="names-attribute.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;ok&quot;</span></span>
<span id="cb7-4"><a href="names-attribute.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, <span class="at">select =</span> <span class="st">`</span><span class="at">.1</span><span class="st">`</span>)</span>
<span id="cb7-5"><a href="names-attribute.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb7-6"><a href="names-attribute.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `.1` </span></span>
<span id="cb7-7"><a href="names-attribute.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;</span></span>
<span id="cb7-8"><a href="names-attribute.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 ok</span></span>
<span id="cb7-9"><a href="names-attribute.html#cb7-9" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="st">`</span><span class="at">.1</span><span class="st">`</span>)</span>
<span id="cb7-10"><a href="names-attribute.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb7-11"><a href="names-attribute.html#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `.1` </span></span>
<span id="cb7-12"><a href="names-attribute.html#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;</span></span>
<span id="cb7-13"><a href="names-attribute.html#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 ok</span></span></code></pre></div>
<p>Two dots followed by a number, <code>..j</code>, does need repair. The same goes for three dots, <code>...</code>, the ellipsis or “dots” construct. These can’t function as names, even if quoted with backticks, so they have to be repaired.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="names-attribute.html#cb8-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">`</span><span class="at">..1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;not ok&quot;</span>)</span>
<span id="cb8-2"><a href="names-attribute.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error:</span></span>
<span id="cb8-3"><a href="names-attribute.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Column 1 must not have names of the form ... or ..j.</span></span>
<span id="cb8-4"><a href="names-attribute.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Use .name_repair to specify repair.</span></span>
<span id="cb8-5"><a href="names-attribute.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Caused by error in `repaired_names()`:</span></span>
<span id="cb8-6"><a href="names-attribute.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Names can&#39;t be of the form `...` or `..j`.</span></span>
<span id="cb8-7"><a href="names-attribute.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✖ These names are invalid:</span></span>
<span id="cb8-8"><a href="names-attribute.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   * &quot;..1&quot; at location 1.</span></span>
<span id="cb8-9"><a href="names-attribute.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(df, <span class="st">`</span><span class="at">..1</span><span class="st">`</span>)</span>
<span id="cb8-10"><a href="names-attribute.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in eval(substitute(expr), data, enclos = parent.frame()): ..1 used in an incorrect context, no ... to look in</span></span>
<span id="cb8-11"><a href="names-attribute.html#cb8-11" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="st">`</span><span class="at">..1</span><span class="st">`</span>)</span>
<span id="cb8-12"><a href="names-attribute.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in `dplyr::select()`:</span></span>
<span id="cb8-13"><a href="names-attribute.html#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! &#39;...&#39; used in an incorrect context</span></span>
<span id="cb8-14"><a href="names-attribute.html#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="names-attribute.html#cb8-15" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">`</span><span class="at">...</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;not ok&quot;</span>)</span>
<span id="cb8-16"><a href="names-attribute.html#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error:</span></span>
<span id="cb8-17"><a href="names-attribute.html#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Column 1 must not have names of the form ... or ..j.</span></span>
<span id="cb8-18"><a href="names-attribute.html#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Use .name_repair to specify repair.</span></span>
<span id="cb8-19"><a href="names-attribute.html#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Caused by error in `repaired_names()`:</span></span>
<span id="cb8-20"><a href="names-attribute.html#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Names can&#39;t be of the form `...` or `..j`.</span></span>
<span id="cb8-21"><a href="names-attribute.html#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✖ These names are invalid:</span></span>
<span id="cb8-22"><a href="names-attribute.html#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   * &quot;...&quot; at location 1.</span></span>
<span id="cb8-23"><a href="names-attribute.html#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, <span class="at">select =</span> <span class="st">`</span><span class="at">...</span><span class="st">`</span>)</span>
<span id="cb8-24"><a href="names-attribute.html#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): &#39;...&#39; used in an incorrect context</span></span>
<span id="cb8-25"><a href="names-attribute.html#cb8-25" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="st">`</span><span class="at">...</span><span class="st">`</span>)</span>
<span id="cb8-26"><a href="names-attribute.html#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): &#39;...&#39; used in an incorrect context</span></span></code></pre></div>
<p>Both are repaired as if they were <code>""</code>.</p>
<div id="making-names-unique" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Making names unique<a href="names-attribute.html#making-names-unique" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many ways to make names unique. We append a suffix of the form <code>...j</code> to any name that is a duplicate or <code>""</code> or <code>...</code>, where <code>j</code> is the position. Why?</p>
<ul>
<li>An absolute position <code>j</code> is more helpful than numbering within the elements
that share a name. Context: troubleshooting data import with lots of columns
and dysfunctional names.</li>
<li>We hypothesize that it’s better have a “level playing field” when repairing
names, i.e. if <code>foo</code> appears twice, both instances get repaired, not just the
second occurrence.</li>
</ul>
<p>The unique level of naminess is regarded as normative for a tibble and a user must expressly request a tibble with names that violate this (but that is possible).</p>
<p>Base R’s function for this is <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/make.unique.html">make.unique()</a>. We revisit the example above, comparing the tidyverse strategy for making names unique vs. what <code>make.unique()</code> does.</p>
<pre><code>Original Unique names     Result of
   names  (tidyverse) make.unique()
      &quot;&quot;         ...1            &quot;&quot;
       x        x...2             x
      &quot;&quot;         ...3            .1
     ...         ...4           ...
       y            y             y
       x        x...6           x.1</code></pre>
</div>
<div id="roundtrips" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Roundtrips<a href="names-attribute.html#roundtrips" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When unique-ifying names, we assume that the input names have been repaired by the same strategy, i.e. that we are consuming dogfood. Therefore, pre-existing suffixes of the form <code>...j</code> are stripped, prior to (re-)constructing the suffixes. If this interacts poorly with your names, you need to take control of name repair.</p>
<p>Example of re-unique-ified names:</p>
<pre><code> original unique-ified
     ...5         ...1
        x        x...2
    x...3        x...3
       &quot;&quot;         ...4
x...1...5        x...5</code></pre>
<p><em>JB: it is conceivable that this should be under the control of an argument, e.g. <code>dogfood = TRUE</code>, in the (currently unexported) function that does this</em></p>
</div>
<div id="when-is-minimal-better-than-unique" class="section level3 hasAnchor" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> When is minimal better than unique?<a href="names-attribute.html#when-is-minimal-better-than-unique" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Why would you ever want to import a tibble and enforce only minimal names, instead of unique? Sometimes the first row of a data source – allegedly variable names – actually contains <strong>data</strong> and the resulting tibble will be reshaped with, e.g., <code>tidyr::gather()</code>. In this case, it is better to not munge the names at import. This is a common special case of the “data stored in names” phenomenon.</p>
<p>In general, you may want to tolerate minimal names when the dysfunctional names are just an awkward phase that an object is passing through and a more definitive solution is applied downstream.</p>
</div>
<div id="ugly-with-a-purpose" class="section level3 hasAnchor" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> Ugly, with a purpose<a href="names-attribute.html#ugly-with-a-purpose" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You might say that names like <code>x...5</code> are ugly and you would be right. We’re calling this a feature, not a bug! Names that have been automatically unique-ified by the tidyverse should catch the eye and give the user strong encouragement to take charge of the situation.</p>
</div>
<div id="why-so-many-dots" class="section level3 hasAnchor" number="3.5.5">
<h3><span class="header-section-number">3.5.5</span> Why so many dots?<a href="names-attribute.html#why-so-many-dots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The suffix of <code>...j</code>, with 3 leading dots, is the result of jointly satisfying multiple requirements. It is important to anticipate a missing name, where the suffix becomes the entire name. We have elected to make the suffix a syntactic name (more below), because non-syntactic names are a frequent cause of unexpected friction for users. This means the suffix can’t be <code>j</code>, <code>.j</code>, or <code>..j</code>, because all are non-syntactic. It must be <code>...j</code>.</p>
</div>
<div id="why-dots-in-the-first-place" class="section level3 hasAnchor" number="3.5.6">
<h3><span class="header-section-number">3.5.6</span> Why dot(s) in the first place?<a href="names-attribute.html#why-dots-in-the-first-place" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The underscore <code>_</code> was also considered when choosing the suffix strategy, but was rejected. Why? Because syntactic names can’t start with an underscore and we want the suffix itself to be syntactic. Also, the dot <code>.</code> is already used by base R’s <code>make.names()</code> to replace invalid characters. It seems simpler and, therefore, better to use the same character, in the same way, as much as possible in name repair. We use the dot <code>.</code>, we put it at the front, as many times as necessary.</p>
</div>
</div>
<div id="universal-names" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Universal names<a href="names-attribute.html#universal-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Universal</strong> names are <strong>unique</strong>, in the sense described above, and <strong>syntactic</strong>, in the normal R sense. Universal names are appealing because they play nicely with base R and tidyverse functions that accept unquoted variable names.</p>
<div id="syntactic-names" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Syntactic names<a href="names-attribute.html#syntactic-names" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A syntactic name in R:</p>
<ul>
<li>Consists of letters, numbers, and the dot <code>.</code> or underscore <code>_</code> characters.</li>
<li>Starts with a letter or starts with a dot <code>.</code> followed by anything but a
number.</li>
<li>Is not a reserved word, such as <code>if</code> or <code>function</code> or <code>TRUE</code>.</li>
<li>Is not <code>...</code>, R’s special ellipsis or “dots” construct.</li>
<li>Is not of the form <code>..j</code>, where <code>j</code> is a number.</li>
</ul>
<p>See R’s documentation for <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/Reserved.html">Reserved words</a> and <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/Quotes.html">Quotes</a>, specifically the section on names and identifiers.</p>
<p>A syntactic name can be used “as is” in code. For example, it does not require quoting in order to work with non-standard evaluation, such as list indexing via <code>$</code>, in a formula, or in packages like dplyr and ggplot2.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="names-attribute.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## a syntactic name doesn&#39;t require quoting</span></span>
<span id="cb11-2"><a href="names-attribute.html#cb11-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(<span class="at">.else =</span> <span class="st">&quot;else?!&quot;</span>)</span>
<span id="cb11-3"><a href="names-attribute.html#cb11-3" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>.else</span>
<span id="cb11-4"><a href="names-attribute.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;else?!&quot;</span></span>
<span id="cb11-5"><a href="names-attribute.html#cb11-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(x, .else)</span>
<span id="cb11-6"><a href="names-attribute.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb11-7"><a href="names-attribute.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   .else </span></span>
<span id="cb11-8"><a href="names-attribute.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; </span></span>
<span id="cb11-9"><a href="names-attribute.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 else?!</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="names-attribute.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## use a non-syntactic name</span></span>
<span id="cb12-2"><a href="names-attribute.html#cb12-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(<span class="st">`</span><span class="at">else</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;else?!&quot;</span>)</span>
<span id="cb12-3"><a href="names-attribute.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="names-attribute.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="do">## this code does not parse</span></span>
<span id="cb12-5"><a href="names-attribute.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># x$else</span></span>
<span id="cb12-6"><a href="names-attribute.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr::select(x, else)</span></span>
<span id="cb12-7"><a href="names-attribute.html#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="names-attribute.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="do">## a non-syntacitic name requires quoting</span></span>
<span id="cb12-9"><a href="names-attribute.html#cb12-9" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span><span class="st">`</span><span class="at">else</span><span class="st">`</span></span>
<span id="cb12-10"><a href="names-attribute.html#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;else?!&quot;</span></span>
<span id="cb12-11"><a href="names-attribute.html#cb12-11" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(x, <span class="st">`</span><span class="at">else</span><span class="st">`</span>)</span>
<span id="cb12-12"><a href="names-attribute.html#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb12-13"><a href="names-attribute.html#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `else`</span></span>
<span id="cb12-14"><a href="names-attribute.html#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; </span></span>
<span id="cb12-15"><a href="names-attribute.html#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 else?!</span></span></code></pre></div>
<p>Note that being syntactic is a property of an individual name.</p>
</div>
<div id="making-an-individual-name-syntactic" class="section level3 hasAnchor" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Making an individual name syntactic<a href="names-attribute.html#making-an-individual-name-syntactic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many ways to fix a non-syntactic name. Here’s how our logic compares to <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/make.names.html">base::make.names()</a> for a single name:</p>
<ul>
<li>Same: Definition of what is syntactically valid.
<ul>
<li>Claim: If <code>syn_name</code> is a name that we have made syntactic, then
<code>syn_name == make.names(syn_name)</code>. If you find a counterexample, tell us!</li>
</ul></li>
<li>Same: An invalid character is replaced with a dot <code>.</code>.</li>
<li>Different: We always fix a name by prepending a dot <code>.</code>. <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/make.names.html">base::make.names()</a>
sometimes prefixes with <code>X</code> and at other times appends a dot <code>.</code>.
<ul>
<li>This means we turn <code>...</code> into <code>....</code> and <code>..j</code> into <code>...j</code>, where <code>j</code> is a
number. <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/make.names.html">base::make.names()</a> does not modify <code>...</code> or <code>..j</code>, which could be
regarded as a bug (?).</li>
</ul></li>
<li>Different: We treat <code>NA</code> and <code>""</code> the same: both become <code>.</code>. This is because
we first make names minimal. <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/make.names.html">base::make.names()</a> turns <code>NA</code> into <code>"NA."</code> and <code>""</code> into <code>"X"</code>.</li>
</ul>
<p>Examples of the tidyverse approach to making individual names syntactic versus <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/make.names.html"><code>base::make.names()</code></a>:</p>
<pre><code>Original Syntactic name    Result of
    name    (tidyverse) make.names()
      &quot;&quot;              .            X
      NA              .          NA.
     (y)            .y.         X.y.
      _z            ._z          X_z
    .2fa          ..2fa        X.2fa
   FALSE         .FALSE       FALSE.
     ...           ....          ...
     ..3           ...3          ..3</code></pre>
<!-- FIXME? point out the non-syntactic names returned by make.names() -->
<p>Currently implemented in the unexported function <code>tibble:::make_syntactic()</code>.</p>
</div>
<div id="why-universal" class="section level3 hasAnchor" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> Why universal?<a href="names-attribute.html#why-universal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now we can state the motivation for universal names, which have the group-wise property of being unique and the element-wise property of being syntactic.</p>
<p>In practice, if you want syntactic names, you probably also want them to be unique. You need both in order to refer to individual elements easily, without ambiguity and without quoting.</p>
<p>Universal names can be requested in the tidyverse via <code>.name_repair = "universal"</code>, in functions that expose name repair.</p>
</div>
<div id="making-names-universal" class="section level3 hasAnchor" number="3.6.4">
<h3><span class="header-section-number">3.6.4</span> Making names universal<a href="names-attribute.html#making-names-universal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Universal names are implemented as a variation on unique names. Basically, suffixes are stripped and <code>...</code> is replaced with <code>""</code>. These draft names are transformed with <code>tibble:::make_syntactic()</code> (this step is omitted for unique names). Then <code>...j</code> suffixes are appended as necessary.</p>
<p>Note that suffix stripping and the substitution of <code>""</code> for <code>...</code> happens before the draft names are made syntactic. So, although <code>tibble:::make_syntactic</code> turns <code>...</code> into <code>....</code>, universal or unique name repair will turn <code>...</code> into something of the form <code>...j</code>.</p>
</div>
</div>
<div id="messaging-user-about-name-repair" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Messaging user about name repair<a href="names-attribute.html#messaging-user-about-name-repair" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Name repair should be communicated to the user. Here’s how tibble messages:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="names-attribute.html#cb14-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb14-2"><a href="names-attribute.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span>, <span class="at">x =</span> <span class="dv">2</span>, <span class="st">`</span><span class="at">a1:</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">`</span><span class="at">_x_y}</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">4</span>,</span>
<span id="cb14-3"><a href="names-attribute.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">.name_repair =</span> <span class="st">&quot;universal&quot;</span></span>
<span id="cb14-4"><a href="names-attribute.html#cb14-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-5"><a href="names-attribute.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; New names:</span></span>
<span id="cb14-6"><a href="names-attribute.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • `x` -&gt; `x...1`</span></span>
<span id="cb14-7"><a href="names-attribute.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • `x` -&gt; `x...2`</span></span>
<span id="cb14-8"><a href="names-attribute.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • `a1:` -&gt; `a1.`</span></span>
<span id="cb14-9"><a href="names-attribute.html#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • `_x_y}` -&gt; `._x_y.`</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="unifying-principles.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="call-data-details.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tidyverse/principles/edit/master/names.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
