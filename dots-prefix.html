<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>20 Dot prefix | Tidyverse design guide</title>
<meta name="author" content="Tidyverse team">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="20 Dot prefix | Tidyverse design guide">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="20 Dot prefix | Tidyverse design guide">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<meta name="description" content="20.1 What’s the pattern? When using ... to create a data structure, or when passing ... to a user-supplied function, add a . prefix to all named arguments. This reduces (but does not eliminate)...">
<meta property="og:description" content="20.1 What’s the pattern? When using ... to create a data structure, or when passing ... to a user-supplied function, add a . prefix to all named arguments. This reduces (but does not eliminate)...">
<meta name="twitter:description" content="20.1 What’s the pattern? When using ... to create a data structure, or when passing ... to a user-supplied function, add a . prefix to all named arguments. This reduces (but does not eliminate)...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tidyverse design guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="structure.html"><span class="header-section-number">1</span> Structure</a></li>
<li><a class="" href="unifying-principles.html"><span class="header-section-number">2</span> Unifying principles</a></li>
<li class="book-part">Implementation</li>
<li><a class="" href="names-attribute.html"><span class="header-section-number">3</span> Names attribute</a></li>
<li><a class="" href="call-data-details.html"><span class="header-section-number">4</span> Name details arguments</a></li>
<li><a class="" href="function-names.html"><span class="header-section-number">5</span> Function names</a></li>
<li class="book-part">Interface: inputs</li>
<li><a class="" href="args-hidden.html"><span class="header-section-number">6</span> Avoid hidden arguments</a></li>
<li><a class="" href="args-data-details.html"><span class="header-section-number">7</span> Data, descriptors, details</a></li>
<li><a class="" href="args-independence.html"><span class="header-section-number">8</span> Avoid dependencies between arguments</a></li>
<li><a class="" href="case-study-setnames.html"><span class="header-section-number">9</span> Case study: setNames()</a></li>
<li class="book-part">Interface: default values</li>
<li><a class="" href="def-required.html"><span class="header-section-number">10</span> Required args shouldn’t have defaults</a></li>
<li><a class="" href="cs-rep.html"><span class="header-section-number">11</span> Case study: rep()</a></li>
<li><a class="" href="def-enum.html"><span class="header-section-number">12</span> Enumerate possible options</a></li>
<li><a class="" href="def-magical.html"><span class="header-section-number">13</span> Avoid magical defaults</a></li>
<li><a class="" href="def-short.html"><span class="header-section-number">14</span> Keep defaults short and sweet</a></li>
<li><a class="" href="def-inform.html"><span class="header-section-number">15</span> Explain important defaults</a></li>
<li><a class="" href="def-user.html"><span class="header-section-number">16</span> User settable defaults</a></li>
<li><a class="" href="cs-rgb.html"><span class="header-section-number">17</span> Case study: rgb()</a></li>
<li class="book-part">Interface: ...</li>
<li><a class="" href="dots-position.html"><span class="header-section-number">18</span> Data, dots, details</a></li>
<li><a class="" href="dots-data.html"><span class="header-section-number">19</span> Making data with …</a></li>
<li><a class="active" href="dots-prefix.html"><span class="header-section-number">20</span> Dot prefix</a></li>
<li><a class="" href="dots-inspect.html"><span class="header-section-number">21</span> Inspect the dots</a></li>
<li><a class="" href="cs-mapply-pmap.html"><span class="header-section-number">22</span> Case study: mapply() vs pmap()</a></li>
<li class="book-part">Interface: outputs</li>
<li><a class="" href="out-multi.html"><span class="header-section-number">23</span> Returning multiple values</a></li>
<li><a class="" href="out-type-stability.html"><span class="header-section-number">24</span> Type-stability</a></li>
<li><a class="" href="out-vectorisation.html"><span class="header-section-number">25</span> Vectorisation</a></li>
<li><a class="" href="out-invisible.html"><span class="header-section-number">26</span> Side-effect functions should return invisibly</a></li>
<li class="book-part">Interface: errors</li>
<li><a class="" href="err-call.html"><span class="header-section-number">27</span> Error call</a></li>
<li><a class="" href="err-constructor.html"><span class="header-section-number">28</span> Error constructors</a></li>
<li class="book-part">Interface: changes</li>
<li><a class="" href="changes-multivers.html"><span class="header-section-number">29</span> Work with multiple dependency versions</a></li>
<li class="book-part">Interface: side effects</li>
<li><a class="" href="side-effect-soup.html"><span class="header-section-number">30</span> Side-effect soup</a></li>
<li><a class="" href="spooky-action.html"><span class="header-section-number">31</span> Spooky action</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="glossary.html"><span class="header-section-number">A</span> Glossary</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="http://github.com/tidyverse/design">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="dots-prefix" class="section level1" number="20">
<h1>
<span class="header-section-number">20</span> Dot prefix<a class="anchor" aria-label="anchor" href="#dots-prefix"><i class="fas fa-link"></i></a>
</h1>
<div id="whats-the-pattern-7" class="section level2" number="20.1">
<h2>
<span class="header-section-number">20.1</span> What’s the pattern?<a class="anchor" aria-label="anchor" href="#whats-the-pattern-7"><i class="fas fa-link"></i></a>
</h2>
<p>When using <code>...</code> to create a data structure, or when passing <code>...</code> to a user-supplied function, add a <code>.</code> prefix to all named arguments. This reduces (but does not eliminate) the chances of matching an argument at the wrong level. Additionally, you should always provide some mechanism that allows you to escape and use that name if needed.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/">purrr</a></span><span class="op">)</span></span></code></pre></div>
<p>(Not important if you ignore names: e.g. <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code>.)</p>
</div>
<div id="what-are-some-examples-11" class="section level2" number="20.2">
<h2>
<span class="header-section-number">20.2</span> What are some examples?<a class="anchor" aria-label="anchor" href="#what-are-some-examples-11"><i class="fas fa-link"></i></a>
</h2>
<p>Look at the arguments to some functions in purrr:</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">map</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (.x, .f, ...) </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">reduce</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (.x, .f, ..., .init, .dir = c("forward", "backward")) </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">detect</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (.x, .f, ..., .dir = c("forward", "backward"), .right = NULL, </span></span>
<span><span class="co">#&gt;     .default = NULL) </span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Notice that all named arguments start with <code>.</code>. This reduces the chance that you will incorrectly match an argument to <code><a href="https://purrr.tidyverse.org/reference/map.html">map()</a></code>, rather than to an argument of <code>.f</code>. Obviously it can’t eliminate it.</p>
<p>Escape mechanism is the anonymous function. Little easier to access in <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map()</a></code> since you can create with <code>~</code>, which is much less typing than <code>function() {}</code>. For example, imagine you want to…</p>
<p>Example: <a href="https://jennybc.github.io/purrr-tutorial/ls02_map-extraction-advanced.html#list_inside_a_data_frame" class="uri">https://jennybc.github.io/purrr-tutorial/ls02_map-extraction-advanced.html#list_inside_a_data_frame</a></p>
</div>
<div id="case-study-dplyr-verbs" class="section level2" number="20.3">
<h2>
<span class="header-section-number">20.3</span> Case study: dplyr verbs<a class="anchor" aria-label="anchor" href="#case-study-dplyr-verbs"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; function (.data, ..., .preserve = FALSE) </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; function (.data, ..., .add = FALSE, .drop = group_by_drop_default(.data)) </span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Escape hatch is <code>:=</code>.</p>
<p>Ooops:</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; function (x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), </span></span>
<span><span class="co">#&gt;     ..., keep = FALSE) </span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div id="other-approaches-in-base-r" class="section level2" number="20.4">
<h2>
<span class="header-section-number">20.4</span> Other approaches in base R<a class="anchor" aria-label="anchor" href="#other-approaches-in-base-r"><i class="fas fa-link"></i></a>
</h2>
<p>Base R uses two alternative methods: uppercase and <code>_</code> prefix.</p>
<p>The apply family tends to use uppercase function names for the same reason. Unfortunately the functions are a little inconsitent which makes it hard to see this pattern. I think a dot prefix is better because it’s easier to type (you don’t have to hold down the shift-key with one finger).</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">lapply</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (X, FUN, ...) </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">sapply</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (X, FUN, ..., simplify = TRUE, USE.NAMES = TRUE) </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">apply</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (X, MARGIN, FUN, ..., simplify = TRUE) </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">mapply</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (FUN, ..., MoreArgs = NULL, SIMPLIFY = TRUE, USE.NAMES = TRUE) </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">tapply</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (X, INDEX, FUN = NULL, ..., default = NA, simplify = TRUE) </span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/funprog.html">Reduce()</a></code> and friends avoid the problem altogether by not accepting <code>...</code>, and requiring that the user creates anonymous functions. But this is verbose, particularly without shortcuts to create functions.</p>
<p><code><a href="https://rdrr.io/r/base/transform.html">transform()</a></code> goes a step further and uses an non-syntactic variable name.</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">transform</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (`_data`, ...) </span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Using a non-syntactic variable names means that it must always be surrounded in <code>`</code>. This means that a user is even less likely to use it that with <code>.</code>, but it increases friction when writing the function. In my opinion, this trade-off is not worth it.</p>
</div>
<div id="what-are-the-exceptions-5" class="section level2" number="20.5">
<h2>
<span class="header-section-number">20.5</span> What are the exceptions?<a class="anchor" aria-label="anchor" href="#what-are-the-exceptions-5"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p><code><a href="https://rdrr.io/r/base/conditions.html">tryCatch()</a></code>: the names give classes so, as long as you don’t create a
condition class called <code>expr</code> or <code>finally</code> (which would be weird!) you
don’t need to worry about matches</p></li>
<li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="dots-data.html"><span class="header-section-number">19</span> Making data with …</a></div>
<div class="next"><a href="dots-inspect.html"><span class="header-section-number">21</span> Inspect the dots</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#dots-prefix"><span class="header-section-number">20</span> Dot prefix</a></li>
<li><a class="nav-link" href="#whats-the-pattern-7"><span class="header-section-number">20.1</span> What’s the pattern?</a></li>
<li><a class="nav-link" href="#what-are-some-examples-11"><span class="header-section-number">20.2</span> What are some examples?</a></li>
<li><a class="nav-link" href="#case-study-dplyr-verbs"><span class="header-section-number">20.3</span> Case study: dplyr verbs</a></li>
<li><a class="nav-link" href="#other-approaches-in-base-r"><span class="header-section-number">20.4</span> Other approaches in base R</a></li>
<li><a class="nav-link" href="#what-are-the-exceptions-5"><span class="header-section-number">20.5</span> What are the exceptions?</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="http://github.com/tidyverse/design/blob/main/dots-prefix.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="http://github.com/tidyverse/design/edit/main/dots-prefix.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tidyverse design guide</strong>" was written by Tidyverse team. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
